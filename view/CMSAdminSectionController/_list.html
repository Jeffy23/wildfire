<?foreach($all_rows as $row):?>
    <tr id="row-<?=$row->id?>">
      <?foreach($scaffold_columns as $column=>$params):?>
        <td class="column">
          <?if($params["link"]):?> <?=link_to($row->$column, array("action"=>"edit", "id"=>$row->id))?>
          <?else:?>
          <?$tmp = str_pad("", $row->get_level(), "*", STR_PAD_LEFT);?>
          <?=str_replace("*", "&raquo;", $tmp)?>
          <?=$row->$column?>
          <?endif;?>
        </td>
      <?endforeach?>
      <td class="column">
        <?if(is_array($permissions)):?>
          <?if(isset($permissions['EDIT'])):?>
          <div class="generic_button"><?=link_to("Edit", array("action"=>"edit", "id"=>$row->id))?></div>
          <?endif?>
          <?if(isset($permissions['DELETE'])):?>
          <div class="generic_button"><?=link_to("Delete", array("action"=>"delete", "id"=>$row->id), array("confirm"=> "Are you sure you want to do that?"))?></div>
          <?endif?>
        <?else:?>
          <div class="generic_button"><?=link_to("Edit", array("action"=>"edit", "id"=>$row->id))?></div>
          <div class="generic_button"><?=link_to("Delete", array("action"=>"delete", "id"=>$row->id), array("confirm"=> "Are you sure you want to do that?"))?></div>          
        <?endif?>
      </td>
    </tr>
<?endforeach?>