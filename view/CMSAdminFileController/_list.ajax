<ul class="jqueryFileTree" style="display: none;">
  <?if(count($files)>2):?>
    <?foreach($files as $file):?>
      <!-- <?=($file)?> -->
      <?if($file && $file[0] != "." && is_dir(PUBLIC_DIR.$this->dir.$file)):?>
      <li class='directory collapsed clearfix'>
        <span class='options'>
          <a href="/<?=trim($controller,"/")?>/child/?file=<?=htmlentities($this->dir.$file)?>"><span class='ui-icon ui-icon-circle-plus new_folder'>add</span></a>
          <a href="/<?=trim($controller,"/")?>/delete/?file=<?=htmlentities($this->dir.$file)?>"><span class='ui-icon ui-icon-circle-minus'>remove</span></a>
        </span>
        <a href='#' rel="<?=htmlentities($this->dir.$file)?>/" class='top' data-dir="<?=htmlentities($this->dir.$file)?>/" data-name="<?=basename($this->dir.$file)?>"><?=$file?></a>
      </li>
      <?elseif($file && $file[0] != "." && is_file(PUBLIC_DIR.$this->dir.$file)):?>
      <?$ext = preg_replace('/^.*\./', '', $file);?>
      <li class='file ext_<?=$ext?>'>
        <span class='options'>
          <a href="/<?=trim($controller,"/")?>/delete/?file=<?=htmlentities($this->dir.$file)?>"><span class='ui-icon ui-icon-circle-minus'>remove</span></a>
        </span>
        <a href="#" rel="<?=htmlentities($this->dir.$file)?>" data-dir="<?=$this->dir?>" data-name="<?=basename($this->dir)?>"><?=$file?></a>
      </li>
      <?endif?>
    <?endforeach?>
  <?else:?>
  <li>no files</li>
  <?endif?>
</ul>