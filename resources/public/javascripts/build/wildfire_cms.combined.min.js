(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms")}this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s)}else{alert(s)}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug=""}var rows=table.tBodies[0].rows;if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter)}else{if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter)}}if(!p){p=detectParserForColumn(table,cells[i])}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n"}list.push(p)}}if(table.config.debug){log(parsersDebug)}return list}function detectParserForColumn(table,node){var l=parsers.length;for(var i=1;i<l;i++){if(parsers[i].is($.trim(getElementText(table.config,node)),table,node)){return parsers[i]}}return parsers[0]}function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i]}}return false}function buildCache(table){if(table.config.debug){var cacheTime=new Date()}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=table.tBodies[0].rows[i],cols=[];cache.row.push($(c));for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]))}cols.push(i);cache.normalized.push(cols);cols=null}if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime)}return cache}function getElementText(config,node){if(!node){return""}var t="";if(config.textExtraction=="simple"){if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){t=node.childNodes[0].innerHTML}else{t=node.innerHTML}}else{if(typeof(config.textExtraction)=="function"){t=config.textExtraction(node)}else{t=$(node).text()}}return t}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){rows.push(r[n[i][checkCell]]);if(!table.config.appender){var o=r[n[i][checkCell]];var l=o.length;for(var j=0;j<l;j++){tableBody[0].appendChild(o[j])}}}if(table.config.appender){table.config.appender(table,rows)}rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime)}applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd")},0)}function buildHeaders(table){if(table.config.debug){var time=new Date()}var meta=($.metadata)?true:false,tableHeadersRows=[];for(var i=0;i<table.tHead.rows.length;i++){tableHeadersRows[i]=0}$tableHeaders=$("thead th",table);$tableHeaders.each(function(index){this.count=0;this.column=index;this.order=formatSortingOrder(table.config.sortInitialOrder);if(checkHeaderMetadata(this)||checkHeaderOptions(table,index)){this.sortDisabled=true}if(!this.sortDisabled){$(this).addClass(table.config.cssHeader)}table.config.headerList[index]=this});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders)}return $tableHeaders}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++))}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell)}}}return arr}function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true}return false}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true}return false}function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table)}}function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i]}}}function formatSortingOrder(v){if(typeof(v)!="Number"){i=(v.toLowerCase()=="desc")?1:0}else{i=(v==(0||1))?v:0}return i}function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true}}return false}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this)}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]])}}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$("<colgroup>");$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($("<col>").css("width",$(this).width()))});$(table).prepend(colgroup)}}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date()}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(getCachedSortType(table.config.parsers,c)=="text")?((order==0)?"sortText":"sortTextDesc"):((order==0)?"sortNumeric":"sortNumericDesc");var e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; "}dynamicExp+="return 0; ";dynamicExp+="}; ";eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime)}return cache}function sortText(a,b){return((a<b)?-1:((a>b)?1:0))}function sortTextDesc(a,b){return((b<a)?-1:((b>a)?1:0))}function sortNumeric(a,b){return a-b}function sortNumericDesc(a,b){return b-a}function getCachedSortType(parsers,i){return parsers[i].type}this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies){return}var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){$this.trigger("sortStart");var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){var $cell=$(this);var i=this.column;this.order=this.count++%2;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j])}}}config.sortList.push([i,this.order])}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2}}}else{config.sortList.push([i,this.order])}}setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache))},1);return false}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false}});$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this)}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache))}).bind("appendCache",function(){appendToTable(this,cache)}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this)}).bind("applyWidgets",function(){applyWidget(this)});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList])}applyWidget(this)})};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false}}if(a){parsers.push(parser)}};this.addWidget=function(widget){widgets.push(widget)};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i};this.isDigit=function(s,config){var DECIMAL="\\"+config.decimal;var exp="/(^[+]?0("+DECIMAL+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+DECIMAL+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+DECIMAL+"0+$)/";return RegExp(exp).test($.trim(s))};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild){this.removeChild(this.firstChild)}}empty.apply(table.tBodies[0])}else{table.tBodies[0].innerHTML=""}}}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true},format:function(s){return $.trim(s.toLowerCase())},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c)},format:function(s){return $.tablesorter.formatFloat(s)},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[Â£$â‚¬?.]/.test(s)},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""))},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s)},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item}else{r+=item}}return $.tablesorter.formatFloat(r)},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s)},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s)},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s))},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""))},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s)},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2")}else{if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1")}else{if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")}}}return $.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s)},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime())},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?"sortValue":c.parserMetadataName;return $(cell).metadata()[p]},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date()}$("tr:visible",table.tBodies[0]).filter(":even").removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(":odd").removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time)}}})})(jQuery);(function(a){a.fn.hint=function(f){if(!f||typeof(f)=="object"){f=a.extend({focus_class:"hint_focus",changed_class:"hint_changed",populate_from:"default",text:null,remove_labels:false},f)}else{if(typeof(f)=="string"&&f.toLowerCase()=="destroy"){var c=true}}return this.each(function(){if(c){b(this).unbind("focus.hint").unbind("blur.hint").removeData("defText");return false}e(b(this))});function e(k){var l="";switch(f.populate_from){case"alt":l=k.attr("alt");k.val(l);break;case"label":l=b("label[for='"+k.attr("id")+"']").text();k.val(l);break;case"custom":l=f.text;k.val(l);break;default:l=k.val()}k.addClass("hint").data("defText",l);if(f.remove_labels==true){b("label[for='"+k.attr("id")+"']").remove()}if(k.attr("type")=="password"){var h=k.data("defText");var j=b('<input type="text"/>');j.attr("name",k.attr("name"));j.attr("size",k.attr("size"));j.attr("class",k.attr("class"));j.val(k.val());j.data("defType","password").data("defText",h);k.replaceWith(j);var k=j}g(k);d(k)}function g(h){h.bind("focus.hint",function(l){var l=b(this);if(l.val()==l.data("defText")){l.val("")}l.addClass(f.focus_class).removeClass(f.changed_class);if(l.data("defType")=="password"){var j=l.data("defText");var k=b('<input type="password"/>');k.attr("name",l.attr("name"));k.attr("size",l.attr("size"));k.attr("class",l.attr("class"));k.val(l.val());k.data("defType","password").data("defText",j);l.replaceWith(k);var l=k;l.focus();d(l)}})}function d(h){h.bind("blur.hint",function(){var l=b(this);if(l.val()==""){l.val(l.data("defText"))}l.removeClass(f.focus_class);if(l.val()!=l.data("defText")){l.addClass(f.changed_class)}else{l.removeClass(f.changed_class)}if(l.data("defType")=="password"&&l.val()==l.data("defText")){var j=l.data("defText");var k=b('<input type="text"/>');k.attr("name",l.attr("name"));k.attr("size",l.attr("size"));k.attr("class",l.attr("class"));k.val(l.val());k.data("defType","password").data("defText",j);l.replaceWith(k);var l=k;g(k)}})}};var b=jQuery})(jQuery);jQuery.imgAreaSelect=function(l,O){var aa=jQuery("<div></div>"),ab=jQuery("<div></div>"),Z=jQuery("<div></div>"),T=jQuery("<div></div>"),ac=jQuery("<div></div>"),Y=jQuery("<div></div>"),U=jQuery("<div></div>"),h,j,ak,L,b,r,K,ag,z,D=0,v,c,N,M,m,k,Q=10,J=[],f=0,q=1,ai,P,B,A,al,aj,W,S,w={x1:0,y1:0,x2:0,y2:0,width:0,height:0};var p=aa.add(ab).add(Z);var e=T.add(ac).add(Y).add(U);function I(d){return d+ak.left+ag.left-K.left}function G(d){return d+ak.top+ag.top-K.top}function F(d){return d-ak.left-ag.left+K.left}function C(d){return d-ak.top-ag.top+K.top}function ae(d){return d.pageX+ag.left-K.left}function ad(d){return d.pageY+ag.top-K.top}function ah(){ak=jQuery(l).offset();L=jQuery(l).width();b=jQuery(l).height();if(jQuery(r).is("body")){K=ag={left:0,top:0}}else{K=jQuery(r).offset();ag={left:r.scrollLeft,top:r.scrollTop}}h=I(0);j=G(0)}function R(){p.css({left:I(w.x1)+"px",top:G(w.y1)+"px",width:Math.max(w.width-O.borderWidth*2,0)+"px",height:Math.max(w.height-O.borderWidth*2,0)+"px"});T.css({left:h+"px",top:j+"px",width:w.x1+"px",height:b+"px"});ac.css({left:h+w.x1+"px",top:j+"px",width:w.width+"px",height:w.y1+"px"});Y.css({left:h+w.x2+"px",top:j+"px",width:L-w.x2+"px",height:b+"px"});U.css({left:h+w.x1+"px",top:j+w.y2+"px",width:w.width+"px",height:b-w.y2+"px"})}function E(d){if(!z){ah();z=true;p.one("mouseout",function(){z=false})}W=F(ae(d))-w.x1;S=C(ad(d))-w.y1;J=[];if(O.resizable){if(S<=Q){J[f]="n"}else{if(S>=w.height-Q){J[f]="s"}}if(W<=Q){J[q]="w"}else{if(W>=w.width-Q){J[q]="e"}}}Z.css("cursor",J.length?J.join("")+"-resize":O.movable?"move":"")}function o(d){if(d.which!=1){return false}ah();if(O.resizable&&J.length>0){jQuery("body").css("cursor",J.join("")+"-resize");B=I(J[q]=="w"?w.x2:w.x1);al=G(J[f]=="n"?w.y2:w.y1);jQuery(document).mousemove(X);Z.unbind("mousemove",E);jQuery(document).one("mouseup",function(){J=[];jQuery("body").css("cursor","");if(O.autoHide){p.add(e).hide()}O.onSelectEnd(l,w);jQuery(document).unbind("mousemove",X);Z.mousemove(E)})}else{if(O.movable){m=w.x1+h;k=w.y1+j;N=ae(d);M=ad(d);jQuery(document).mousemove(a).one("mouseup",function(){O.onSelectEnd(l,w);jQuery(document).unbind("mousemove",a)})}else{jQuery(l).mousedown(d)}}return false}function n(){A=Math.max(h,Math.min(h+L,B+Math.abs(aj-al)*P*(A>B?1:-1)));aj=Math.round(Math.max(j,Math.min(j+b,al+Math.abs(A-B)/P*(aj>al?1:-1))));A=Math.round(A)}function af(){aj=Math.max(j,Math.min(j+b,al+Math.abs(A-B)/P*(aj>al?1:-1)));A=Math.round(Math.max(h,Math.min(h+L,B+Math.abs(aj-al)*P*(A>B?1:-1))));aj=Math.round(aj)}function X(d){A=!J.length||J[q]||P?ae(d):I(w.x2);aj=!J.length||J[f]||P?ad(d):G(w.y2);if(O.minWidth&&Math.abs(A-B)<O.minWidth){A=B-O.minWidth*(A<B?1:-1);if(A<h){B=h+O.minWidth}else{if(A>h+L){B=h+L-O.minWidth}}}if(O.minHeight&&Math.abs(aj-al)<O.minHeight){aj=al-O.minHeight*(aj<al?1:-1);if(aj<j){al=j+O.minHeight}else{if(aj>j+b){al=j+b-O.minHeight}}}A=Math.max(h,Math.min(A,h+L));aj=Math.max(j,Math.min(aj,j+b));if(P){if(Math.abs(A-B)/P>Math.abs(aj-al)){af()}else{n()}}if(O.maxWidth&&Math.abs(A-B)>O.maxWidth){A=B-O.maxWidth*(A<B?1:-1);if(P){af()}}if(O.maxHeight&&Math.abs(aj-al)>O.maxHeight){aj=al-O.maxHeight*(aj<al?1:-1);if(P){n()}}w.x1=F(Math.min(B,A));w.x2=F(Math.max(B,A));w.y1=C(Math.min(al,aj));w.y2=C(Math.max(al,aj));w.width=Math.abs(A-B);w.height=Math.abs(aj-al);R();O.onSelectChange(l,w);return false}function a(d){B=Math.max(h,Math.min(m+ae(d)-N,h+L-w.width));al=Math.max(j,Math.min(k+ad(d)-M,j+b-w.height));A=B+w.width;aj=al+w.height;w.x1=F(B);w.y1=C(al);w.x2=F(A);w.y2=C(aj);R();O.onSelectChange(l,w);d.preventDefault();return false}function g(d){if(d.which!=1){return false}ah();w.x1=w.x2=F(N=B=A=ae(d));w.y1=w.y2=C(M=al=aj=ad(d));w.width=0;w.height=0;J=[];R();p.add(e).show();jQuery(document).mousemove(X);Z.unbind("mousemove",E);O.onSelectStart(l,w);jQuery(document).one("mouseup",function(){if(O.autoHide){p.add(e).hide()}O.onSelectEnd(l,w);jQuery(document).unbind("mousemove",X);Z.mousemove(E)});return false}function u(){ah();R()}this.setOptions=function(d){O=jQuery.extend(O,d);if(d.x1!=null){w.x1=d.x1;w.y1=d.y1;w.x2=d.x2;w.y2=d.y2;d.show=true}r=jQuery(O.parent).get(0);ah();c=jQuery(l);while(c.length&&!c.is("body")){if(!isNaN(c.css("z-index"))&&c.css("z-index")>D){D=c.css("z-index")}if(c.css("position")=="fixed"){v=true}c=c.parent()}B=I(w.x1);al=G(w.y1);A=I(w.x2);aj=G(w.y2);w.width=A-B;w.height=aj-al;R();if(d.hide){p.add(e).hide()}else{if(d.show){p.add(e).show()}}e.addClass(O.classPrefix+"-outer");aa.addClass(O.classPrefix+"-selection");ab.addClass(O.classPrefix+"-border1");Z.addClass(O.classPrefix+"-border2");p.css({borderWidth:O.borderWidth+"px"});aa.css({backgroundColor:O.selectionColor,opacity:O.selectionOpacity});ab.css({borderStyle:"solid",borderColor:O.borderColor1});Z.css({borderStyle:"dashed",borderColor:O.borderColor2});e.css({opacity:O.outerOpacity,backgroundColor:O.outerColor});P=O.aspectRatio&&(ai=O.aspectRatio.split(/:/))?ai[0]/ai[1]:null;if(O.disable||O.enable===false){p.unbind("mousemove",E).unbind("mousedown",o);jQuery(l).add(e).unbind("mousedown",g);jQuery(window).unbind("resize",u)}else{if(O.enable||O.disable===false){if(O.resizable||O.movable){p.mousemove(E).mousedown(o)}jQuery(l).add(e).mousedown(g);jQuery(window).resize(u)}}jQuery(O.parent).append(e.add(p));O.enable=O.disable=undefined};if(jQuery.browser.msie){jQuery(l).attr("unselectable","on")}p.add(e).css({display:"none",position:v?"fixed":"absolute",overflow:"hidden",zIndex:D>0?D:null});aa.css({borderStyle:"solid"});initOptions={borderColor1:"#000",borderColor2:"#fff",borderWidth:1,classPrefix:"imgareaselect",movable:true,resizable:true,selectionColor:"#fff",selectionOpacity:0.2,outerColor:"#000",outerOpacity:0.2,parent:"body",onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}};O=jQuery.extend(initOptions,O);this.setOptions(O)};jQuery.fn.imgAreaSelect=function(a){a=a||{};this.each(function(){if(jQuery(this).data("imgAreaSelect")){jQuery(this).data("imgAreaSelect").setOptions(a)}else{if(a.enable===undefined&&a.disable===undefined){a.enable=true}jQuery(this).data("imgAreaSelect",new jQuery.imgAreaSelect(this,a))}});return this};jQuery(document).ready(function(){if(jQuery("#item_list_container")){jQuery("#item_list_container").tablesorter({dateFormat:"dd/mm/yyyy",highlightClass:"highlight_col",stripingRowClass:["item_row1","item_row0"],stripeRowsOnStartUp:true})}if(jQuery(".form_datepicker")){jQuery(".form_datepicker").datepicker({changeMonth:true,changeYear:true})}$("input.disable_enter").bind("keypress",function(a){return a.keyCode==13?false:true})});jQuery(document).ready(function(){inline_status_change()});function inline_status_change(){if(jQuery(".status_change")){jQuery(".status_change").click(function(){if(!confirm("Are you sure you want to change the publish status?")){return false}current_status=jQuery(this).attr("rel");dest=jQuery(this).attr("href");dest=dest.replace("?status=0","").replace("?status=1","");replace="#"+this.id;jQuery.get(dest,{status:current_status,ajax:"yes"},function(a){jQuery(replace).replaceWith(a);inline_status_change()});return false})}}jQuery.fn.centerScreen=function(a){var b=this;if(!a){b.css("top",jQuery(window).height()/2-this.height()/2);b.css("left",jQuery(window).width()/2-this.width()/2);jQuery(window).resize(function(){b.centerScreen(!a)})}else{b.stop();b.animate({top:jQuery(window).height()/2-this.height()/2,left:jQuery(window).width()/2-this.width()/2},200,"linear")}};var content_page_id;var model_string;var init_upload;var autosaver;wym_editors=[];if(typeof(file_browser_location)=="undefined"){var file_browser_location="/admin/files/browse_images"}var file_mime_type="image";jQuery(document).ready(function(){jQuery("#container").tabs();jQuery("#page_tab_title").html(jQuery("#cms_content_title").val());jQuery("#cms_content_title").keyup(function(){jQuery("#page_tab_title").html(jQuery("#cms_content_title").val())});jQuery("#new_cat_create").click(function(){jQuery.ajax({url:"../../new_category/?cat="+jQuery("#new_cat").val(),complete:function(a){jQuery("#category_list").html(a.responseText);initialise_draggables()}});return false});initialise_draggables();if(jQuery("#copy_permissions_from").length>0){jQuery("#copy_permissions_from").change(function(){jQuery.get("../../copy_permissions_from/"+content_page_id+"?copy_from="+jQuery(this).val(),function(a){jQuery("#cat_dropzone").html(a);init_deletes()});return false})}jQuery("#link_dialog").dialog({autoOpen:false,title:"Insert a Link",width:"auto",height:"auto"});jQuery("#table_dialog").dialog({autoOpen:false,title:"Insert a Table",width:700,height:500});jQuery("#video_dialog").dialog({autoOpen:false,title:"Insert a Video",width:700,height:500});jQuery("#quick_upload_pane").dialog({autoOpen:false,title:"Upload an Image",width:700,height:500});jQuery("#upload_url_pane").dialog({autoOpen:false,title:"Get Image From URL",width:700,height:500});jQuery("#quick_upload_button").click(function(){jQuery("#quick_upload_pane").dialog("open");jQuery.ajax({url:"/admin/files/quickupload/"+content_page_id+"?model="+model_string+"&join_field="+join_field,complete:function(a){jQuery("#quick_upload_pane").html(a.responseText);init_upload()}});return false});jQuery("#upload_url_button").click(function(){jQuery("#upload_url_pane").dialog("open");jQuery.ajax({url:"/admin/files/upload_url/"+content_page_id+"?model="+model_string+"&join_field="+join_field,complete:function(a){jQuery("#upload_url_pane").html(a.responseText);init_upload()}});return false})});function initialise_draggables(){jQuery("#category_list .category_tag, #permission_list .permission_tag").draggable({opacity:0.5,revert:true,scroll:false,containment:"window",helper:"clone"});jQuery("#cat_dropzone").droppable({accept:".category_tag, .permission_tag",hoverClass:"dropzone_active",tolerance:"pointer",drop:function(b,c){if(c.draggable.hasClass("permission_tag")){var a="../../add_permission/"}else{var a="../../add_category/"}jQuery.post(a+content_page_id,{tagid:c.draggable.attr("id"),id:c.draggable.attr("id")},function(d){jQuery("#cat_dropzone").html(d);init_deletes()})}});jQuery("#category_list .category_tag, #permission_list .permission_tag").dblclick(function(){if(jQuery(this).hasClass("permission_tag")){var a="../../add_permission/"}else{var a="../../add_category/"}jQuery.post(a+content_page_id,{tagid:this.id,id:this.id},function(b){jQuery("#cat_dropzone").html(b);init_deletes()})});init_deletes()}function init_deletes(){jQuery(".category_trash_button, .permission_trash_button").click(function(){if(jQuery(this).hasClass("permission_trash_button")){var a="../../remove_permission/";var b=this.id.replace("delete_permission_button_","")}else{var a="../../remove_category/";var b=this.id.substr(22)}jQuery.get(a+content_page_id+"?cat="+b,function(c){jQuery("#cat_dropzone").html(c);init_deletes()})})}function delayed_cat_filter(a){jQuery("#category_filter").css("background","white url(/images/cms/indicator.gif) no-repeat right center");jQuery.ajax({type:"post",url:"/admin/categories/filters",data:"filter="+a,complete:function(b){jQuery("#category_list").html(b.responseText);initialise_draggables();if(typeof(t)!="undefined"){clearTimeout(t)}jQuery("#category_filter").css("background","white")}})}function delayed_image_filter(a){jQuery("#image_filter").css("background","white url(/images/cms/indicator.gif) no-repeat right center");jQuery.ajax({type:"post",url:"/admin/files/image_filter",data:"mime_type="+file_mime_type+"&filter="+jQuery("#image_filter").val(),complete:function(b){jQuery("#image_list").html(b.responseText);initialise_images();if(typeof(t)!="undefined"){clearTimeout(t)}jQuery("#image_filter").css("background","white")}})}jQuery(document).ready(function(a){jQuery("#image_filter").keyup(function(){if(typeof(t)!="undefined"){clearTimeout(t)}t=setTimeout('delayed_image_filter(jQuery("#image_filter").val())',400)});jQuery("#category_filter").keyup(function(){if(typeof(t)!="undefined"){clearTimeout(t)}t=setTimeout('delayed_cat_filter(jQuery("#category_filter").val())',400)});jQuery("#image_filter").focus(function(){if(jQuery(this).val()=="Filter"){jQuery(this).val("")}});jQuery("#category_filter").focus(function(){if(jQuery(this).val()=="Filter"){jQuery(this).val("")}});jQuery("#category_filter").blur(function(){if(jQuery(this).val()==""){jQuery(this).val("Filter")}});jQuery("#wildfire_file_new_folder").change(function(b){jQuery.post(file_browser_location,{filterfolder:jQuery(this).val(),mime_type:file_mime_type},function(c){jQuery("#image_list").html(c);initialise_images()})});jQuery("#view_all_button").click(function(){jQuery.post(file_browser_location,{mime_type:file_mime_type},function(b){jQuery("#image_list").html(b);initialise_images()})});jQuery.get(file_browser_location+"/1/?mime_type="+file_mime_type,function(b){jQuery("#image_list").html(b);initialise_images()});jQuery(".jqwysi").wymeditor({skinPath:"/stylesheets/wymeditor/wildfire/",skin:"wildfire",containersItems:wildfire_containersItems,containersHtml:"<div class='wym_containers wym_section'><h2>Headings</h2><ul>"+WYMeditor.CONTAINERS_ITEMS+"</ul></div>",classesHtml:"<div class='wym_classes wym_section'><h2>Styling</h2><ul>"+WYMeditor.CLASSES_ITEMS+"</ul></div>",postInit:function(c){c.wildfire(c);wym_editors.push(c);var b=jQuery(".ui-resizable-handle");jQuery(".wym_box").resizable({handles:"s"});jQuery(".wym_box").css("height","250px");jQuery(".wym_area_main, .wym_iframe, iframe").css("height","100%");jQuery(".wym_iframe").css("height","91%")}});if(jQuery("#quicksave").length){autosaver=setInterval(function(){autosave_content(wym_editors)},40000);jQuery("#autosave").click(function(){autosave_content(wym_editors)})}});function wym_button(a,c){var b="<li class='wym_tools_"+a+"'><a name='"+a+"' href='#'"+c+"</a></li>";return b}function initialise_images(){jQuery(".drag_image").draggable({opacity:0.5,revert:true,scroll:true,containment:"window",helper:"clone"});jQuery(".remove_image").click(function(){jQuery.get("../../remove_image/"+content_page_id+"?image="+this.id.substr(13)+"&order="+this.parentNode.id.substr(8),function(a){jQuery("#drop_zones").html(a);initialise_images()});return false});jQuery("#drop_zones").sortable({change:function(a,b){alert(jQuery("#drop_zones").sortable("serialize"))}});jQuery(".paginate_images").click(function(){jQuery.get(file_browser_location+"/"+this.id.substr(12)+"?mime_type="+file_mime_type,{},function(a){jQuery("#image_list").html(a);initialise_images()})});jQuery("#drop_zones").droppable({accept:".drag_image",hoverClass:"dropzone_active",tolerance:"pointer",drop:function(a,b){jQuery.post("../../add_image/"+content_page_id,{id:b.draggable.attr("id"),order:jQuery(".dropped_image").size()},function(c){jQuery("#drop_zones").html(c);initialise_images();return true})}});jQuery(".url_image").click(function(){jQuery.get("/admin/files/image_urls/"+jQuery(this).attr("id").replace("url_image_",""),function(a){jQuery("<div>"+a+"</div>").dialog({title:"Image URL",width:700}).dialog("open")})});jQuery(".add_image").unbind("click");jQuery(".add_image").click(function(){jQuery.post("../../add_image/"+content_page_id,{id:jQuery(this).attr("id").replace("add_image_",""),order:jQuery(".dropped_image").size()},function(a){jQuery("#drop_zones").html(a);initialise_images()});return false})}function get_query_var(c,a){var c=c.substring((c.indexOf("?")+1));var d=c.split("&");for(var b=0;b<d.length;b++){var e=d[b].split("=");if(e[0]==a){return e[1]}}}jQuery(document).ready(function(){if(!a){var a="images"}});function reload_images(){jQuery.post(file_browser_location,{filterfolder:jQuery("#wildfire_file_new_folder").val(),mime_type:file_mime_type},function(a){jQuery("#image_list").html(a);initialise_images()});jQuery.get("../../attached_images/"+content_page_id,function(a){jQuery("#drop_zones").html(a);initialise_images()})}function cms_insert_url(a){if(a=="web"){var b=prompt("Enter the URL for this link:","http://")}else{var b=a}if(b!=null){theIframe.contentWindow.document.execCommand("CreateLink",false,b);theWidgEditor.theToolbar.setState("Link","on")}}function cms_insert_video(b,d,a,c){if(c.length>0){theIframe.contentWindow.document.execCommand("inserthtml",false,"<a href='"+b+"' rel='"+d+"px:"+a+"px'>LOCAL:"+c+"</a>")}else{theIframe.contentWindow.document.execCommand("inserthtml",false,"<a href='"+b+"' rel='"+d+"px:"+a+"px'>"+b+"</a>")}theWidgEditor.theToolbar.setState("Video","on")}jQuery(document).ready(function(){jQuery("#autosave_disable").click(function(){clearInterval(autosaver);jQuery("#autosave_status").html("Autosave Disabled")})});function autosave_content(c,a){for(var b in c){c[b].update()}jQuery("#ajaxBusy").hide();jQuery.ajax({url:"/admin/content/autosave/"+content_page_id,beforeSend:function(){jQuery("#quicksave").effect("pulsate",{times:3},1000)},type:"POST",processData:false,data:jQuery("#content_edit_form").serialize(),success:function(d){jQuery("#autosave_status").html("Saved at "+d);jQuery("#ajaxBusy").hide();if(typeof(a)=="function"){a()}}})}function open_modal_preview(a){jQuery("body").append('<div id="modal_preview_window"><iframe src="" /></div>');jQuery("#modal_preview_window").dialog({autoOpen:false,width:(0.9*jQuery(window).width()),height:(0.9*jQuery(window).height()),modal:true,close:function(b,c){jQuery(this).remove()}});jQuery("#modal_preview_window iframe").attr("src","").attr("src",a).load(function(){jQuery("#modal_preview_window").dialog("open");jQuery("#modal_preview_window iframe").css({width:"100%",height:"98%",border:"none"})})}jQuery(document).ready(function(){jQuery("a.modal_preview").click(function(){open_modal_preview(jQuery(this).attr("href"));return false})});jQuery(document).ready(function(){jQuery("#preview_link").unbind("click").click(function(){var a=jQuery(this);autosave_content(wym_editors,function(){if(a.hasClass("modal_preview")){open_modal_preview(a.attr("href"))}else{window.open(a.attr("href"))}});return false})});jQuery(document).ready(function(){jQuery("#content_title_edit").hover(function(){var a=jQuery(this).parent();a.css("background-color","#fbf485");jQuery(this).bind("click.editable",function(){jQuery(this).unbind("click.editable");el='<input type="text" value="'+jQuery("#content_title_label").text()+'" id="content_title_editing" />';elsave=jQuery("<a href='#' id='content_edit_save'><img src='/images/cms/cms_quick_save.gif'</a>");a.parent().after(el);jQuery("#content_title_editing").before(elsave);jQuery("#content_edit_save").css({position:"relative",left:"255px",top:"10px",width:"0px",cursor:"pointer"});elsave.click(function(){jQuery("#content_title").show();jQuery("#content_title_label").html(jQuery("#content_title_editing").val());jQuery("#content_title_editing").remove();jQuery(this).remove()});jQuery("#content_title").hide();jQuery("#content_title_editing").change(function(){var b=jQuery("#content_title").attr("rel");jQuery("#"+b).val(jQuery(this).val())});jQuery("#content_title_editing").blur(function(){jQuery("#content_title").show();jQuery("#content_title_label").html(jQuery("#content_title_editing").val());jQuery("#content_title_editing").remove();jQuery("#content_edit_save").remove()});jQuery("#content_title_editing").get(0).focus()})},function(){var a=jQuery(this).parent();a.css("background-color","transparent");jQuery(this).unbind("click.editable")})});jQuery(document).ready(function(){jQuery("body").append('<div id="ajaxBusy"><p>Loading<br /><img src="/images/cms/indicator_dark.gif"></p></div>');jQuery("#ajaxBusy").css({display:"none",margin:"0",position:"absolute",background:"#333",textAlign:"center",fontSize:"100%",color:"#999",letterSpacing:"5px",textTransform:"uppercase",border:"1px solid #c1c1c1",width:"200px",height:"90px","-webkit-box-shadow":"5px 5px 5px #666","-moz-box-shadow":"5px 5px 5px #666",lineHeight:"190%","-webkit-border-radius":"7px","-moz-border-radius":"7px"});jQuery(document).ajaxStart(function(a){if(jQuery("#ajaxBusy")&&jQuery("#ajaxBusy").length){jQuery("#ajaxBusy").show().centerScreen()}});jQuery(document).ajaxStop(function(){if(jQuery("#ajaxBusy")&&jQuery("#ajaxBusy").length){jQuery("#ajaxBusy").hide()}});jQuery(document).ajaxError(function(){if(jQuery("#ajaxBusy")&&jQuery("#ajaxBusy").length){jQuery("#ajaxBusy").hide()}})});jQuery(document).ready(function(){jQuery("#cms_content_language").change(function(){var a=window.location.href.split("?");window.location.replace(a[0]+"?lang="+jQuery(this).val())})});jQuery(document).ready(function(){jQuery("#dashboard #sub-navigation-container #quick_search").remove();jQuery("#quick_search form input, #quick_create form input").hint();jQuery("#live_search_field").keyup(function(){if(typeof(t)!="undefined"){clearTimeout(t)}t=setTimeout(function(){live_search(jQuery("#live_search_field").val())},400)});jQuery(".live_search_results").hover(function(){},function(){s=setTimeout("live_search_close()",800)});if(jQuery("#statistics").length){jQuery("#statistics").load("/admin/home/stats",false,function(){jQuery(this).css("background-image","none")})}});function live_search(a){jQuery("#live_search_field").css("background","white url(/images/cms/indicator.gif) no-repeat right center");jQuery.ajax({type:"post",url:"/admin/content/search",data:"input="+a,complete:function(b){jQuery("#live_search_field").parent().find(".live_search_results").html(b.responseText).show();if(typeof(t)!="undefined"){clearTimeout(t)}jQuery("#live_search_field").css("background","white")}})}function live_search_close(){if(typeof(s)!="undefined"){clearTimeout(s)}jQuery(".live_search_results").empty();jQuery(".live_search_results").hide()}var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(a){this.initSWFUpload(a)}}SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(a){delete SWFUpload.instances[this.movieName];throw a}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(a){if(typeof(a)!=="string"||a.match(/^https?:\/\//i)||a.match(/^\//)){return a}var c=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var b=window.location.pathname.lastIndexOf("/");if(b<=0){path="/"}else{path=window.location.pathname.substr(0,b)+"/"}return path+a};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(b,a){this.settings[b]=(this.settings[b]==undefined)?a:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var a,b;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(a==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var b=this.buildParamString();var a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var c=this.settings.post_params;var b=[];if(typeof(c)==="object"){for(var a in c){if(c.hasOwnProperty(a)){b.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(c[a].toString()))}}}return b.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var a=null;a=this.getMovieElement();if(a&&typeof(a.CallFunction)==="unknown"){for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(e){}}try{a.parentNode.removeChild(a)}catch(b){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(d){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(b,c,a){if(c==undefined){return(this.settings[b]=a)}else{return(this.settings[b]=c)}};SWFUpload.prototype.getSetting=function(a){if(this.settings[a]!=undefined){return this.settings[a]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,b){if(b!==false){b=true}this.callFlash("CancelUpload",[a,b])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};SWFUpload.prototype.getFile=function(a){if(typeof(a)==="number"){return this.callFlash("GetFileByIndex",[a])}else{return this.callFlash("GetFile",[a])}};SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};SWFUpload.prototype.setHTTPSuccess=function(a){if(typeof a==="string"){a=a.replace(" ","").split(",")}this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};SWFUpload.prototype.setButtonImageURL=function(a){if(a==undefined){a=""}this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(c,a){this.settings.button_width=c;this.settings.button_height=a;var b=this.getMovieElement();if(b!=undefined){b.style.width=c+"px";b.style.height=a+"px"}this.callFlash("SetButtonDimensions",[c,a])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};SWFUpload.prototype.setButtonTextPadding=function(b,a){this.settings.button_text_top_padding=a;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,a])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};SWFUpload.prototype.queueEvent=function(b,c){if(c==undefined){c=[]}else{if(!(c instanceof Array)){c=[c]}}var a=this;if(typeof this.settings[b]==="function"){this.eventQueue.push(function(){this.settings[b].apply(this,c)});setTimeout(function(){a.executeNextEvent()},0)}else{if(this.settings[b]!==null){throw"Event handler "+b+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;if(typeof(a)==="function"){a.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(c){var e=/[$]([0-9a-f]{4})/i;var f={};var d;if(c!=undefined){for(var a in c.post){if(c.post.hasOwnProperty(a)){d=a;var b;while((b=e.exec(d))!==null){d=d.replace(b[0],String.fromCharCode(parseInt("0x"+b[1],16)))}f[d]=c.post[a]}}c.post=f}return c};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return false}};SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();if(!a){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(a);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&typeof(a.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(b){}}}}catch(d){}window.__flash__removeCallback=function(e,f){try{if(e){e[f]=null}}catch(g){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,c,b])};SWFUpload.prototype.fileDialogComplete=function(b,c,a){this.queueEvent("file_dialog_complete_handler",[b,c,a])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler==="function"){a=this.unescapeFilePostParams(a);b=this.settings.upload_start_handler.call(this,a)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(b===undefined){b=true}b=!!b;this.callFlash("ReturnUploadStart",[b])};SWFUpload.prototype.uploadProgress=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,c,b])};SWFUpload.prototype.uploadError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,c,b])};SWFUpload.prototype.uploadSuccess=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("upload_success_handler",[b,a,c])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};SWFUpload.prototype.debugMessage=function(c){if(this.settings.debug){var a,d=[];if(typeof c==="object"&&typeof c.name==="string"&&typeof c.message==="string"){for(var b in c){if(c.hasOwnProperty(b)){d.push(b+": "+c[b])}}a=d.join("\n")||"";d=a.split("\n");a="EXCEPTION: "+d.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(a)}else{SWFUpload.Console.writeLine(c)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(d){var b,a;try{b=document.getElementById("SWFUpload_Console");if(!b){a=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(a);b=document.createElement("textarea");b.id="SWFUpload_Console";b.style.fontFamily="monospace";b.setAttribute("wrap","off");b.wrap="off";b.style.overflow="auto";b.style.width="700px";b.style.height="350px";b.style.margin="5px";a.appendChild(b)}b.value+=d+"\n";b.scrollTop=b.scrollHeight-b.clientHeight}catch(c){alert("Exception: "+c.name+" Message: "+c.message)}};var SWFUpload;if(typeof(SWFUpload)==="function"){SWFUpload.queue={};SWFUpload.prototype.initSettings=(function(a){return function(){if(typeof(a)==="function"){a.call(this)}this.customSettings.queue_cancelled_flag=false;this.customSettings.queue_upload_count=0;this.settings.user_upload_complete_handler=this.settings.upload_complete_handler;this.settings.upload_complete_handler=SWFUpload.queue.uploadCompleteHandler;this.settings.queue_complete_handler=this.settings.queue_complete_handler||null}})(SWFUpload.prototype.initSettings);SWFUpload.prototype.startUpload=function(a){this.customSettings.queue_cancelled_flag=false;this.callFlash("StartUpload",false,[a])};SWFUpload.prototype.cancelQueue=function(){this.customSettings.queue_cancelled_flag=true;this.stopUpload();var a=this.getStats();while(a.files_queued>0){this.cancelUpload();a=this.getStats()}};SWFUpload.queue.uploadCompleteHandler=function(b){var c=this.settings.user_upload_complete_handler;var d;if(b.filestatus===SWFUpload.FILE_STATUS.COMPLETE){this.customSettings.queue_upload_count++}if(typeof(c)==="function"){d=(c.call(this,b)===false)?false:true}else{d=true}if(d){var a=this.getStats();if(a.files_queued>0&&this.customSettings.queue_cancelled_flag===false){this.startUpload()}else{if(this.customSettings.queue_cancelled_flag===false){this.queueEvent("queue_complete_handler",[this.customSettings.queue_upload_count]);this.customSettings.queue_upload_count=0}else{this.customSettings.queue_cancelled_flag=false;this.customSettings.queue_upload_count=0}}}}}function FileProgress(c,a){this.fileProgressID=c.id;this.opacity=100;this.height=0;this.fileProgressWrapper=document.getElementById(this.fileProgressID);if(!this.fileProgressWrapper){this.fileProgressWrapper=document.createElement("div");this.fileProgressWrapper.className="progressWrapper";this.fileProgressWrapper.id=this.fileProgressID;this.fileProgressElement=document.createElement("div");this.fileProgressElement.className="progressContainer";var f=document.createElement("a");f.className="progressCancel";f.href="#";f.style.visibility="hidden";f.appendChild(document.createTextNode(" "));var b=document.createElement("div");b.className="progressName";b.appendChild(document.createTextNode(c.name));var e=document.createElement("div");e.className="progressBarInProgress";var d=document.createElement("div");d.className="progressBarStatus";d.innerHTML="&nbsp;";this.fileProgressElement.appendChild(f);this.fileProgressElement.appendChild(b);this.fileProgressElement.appendChild(d);this.fileProgressElement.appendChild(e);this.fileProgressWrapper.appendChild(this.fileProgressElement);document.getElementById(a).appendChild(this.fileProgressWrapper)}else{this.fileProgressElement=this.fileProgressWrapper.firstChild}this.height=this.fileProgressWrapper.offsetHeight}FileProgress.prototype.setProgress=function(a){this.fileProgressElement.className="progressContainer green";this.fileProgressElement.childNodes[3].className="progressBarInProgress";this.fileProgressElement.childNodes[3].style.width=a+"%"};FileProgress.prototype.setComplete=function(){this.fileProgressElement.className="progressContainer blue";this.fileProgressElement.childNodes[3].className="progressBarComplete";this.fileProgressElement.childNodes[3].style.width="";var a=this;setTimeout(function(){a.disappear()},10000)};FileProgress.prototype.setError=function(){this.fileProgressElement.className="progressContainer red";this.fileProgressElement.childNodes[3].className="progressBarError";this.fileProgressElement.childNodes[3].style.width="";var a=this;setTimeout(function(){a.disappear()},5000)};FileProgress.prototype.setCancelled=function(){this.fileProgressElement.className="progressContainer";this.fileProgressElement.childNodes[3].className="progressBarError";this.fileProgressElement.childNodes[3].style.width="";var a=this;setTimeout(function(){a.disappear()},2000)};FileProgress.prototype.setStatus=function(a){this.fileProgressElement.childNodes[2].innerHTML=a};FileProgress.prototype.toggleCancel=function(b,c){this.fileProgressElement.childNodes[0].style.visibility=b?"visible":"hidden";if(c){var a=this.fileProgressID;this.fileProgressElement.childNodes[0].onclick=function(){c.cancelUpload(a);return false}}};FileProgress.prototype.disappear=function(){var f=15;var c=4;var b=30;if(this.opacity>0){this.opacity-=f;if(this.opacity<0){this.opacity=0}if(this.fileProgressWrapper.filters){try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=this.opacity}catch(d){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+this.opacity+")"}}else{this.fileProgressWrapper.style.opacity=this.opacity/100}}if(this.height>0){this.height-=c;if(this.height<0){this.height=0}this.fileProgressWrapper.style.height=this.height+"px"}if(this.height>0||this.opacity>0){var a=this;setTimeout(function(){a.disappear()},b)}else{this.fileProgressWrapper.style.display="none"}};function fileQueued(c){try{var a=new FileProgress(c,this.customSettings.progressTarget);a.setStatus("Pending...");a.toggleCancel(true,this)}catch(b){this.debug(b)}}function fileQueueError(c,e,d){try{if(e===SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED){alert("You have attempted to queue too many files.\n"+(d===0?"You have reached the upload limit.":"You may select "+(d>1?"up to "+d+" files.":"one file.")));return}var a=new FileProgress(c,this.customSettings.progressTarget);a.setError();a.toggleCancel(false);switch(e){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:a.setStatus("File is too big.");this.debug("Error Code: File too big, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:a.setStatus("Cannot upload Zero Byte files.");this.debug("Error Code: Zero byte file, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:a.setStatus("Invalid File Type.");this.debug("Error Code: Invalid File Type, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;default:if(c!==null){a.setStatus("Unhandled Error")}this.debug("Error Code: "+e+", File name: "+c.name+", File size: "+c.size+", Message: "+d);break}}catch(b){this.debug(b)}}function fileDialogComplete(a,c){try{if(a>0){document.getElementById(this.customSettings.cancelButtonId).disabled=false}}catch(b){this.debug(b)}}function uploadStart(c){try{var a=new FileProgress(c,this.customSettings.progressTarget);a.setStatus("Uploading...");a.toggleCancel(true,this)}catch(b){}return true}function uploadProgress(c,f,e){try{var d=Math.ceil((f/e)*100);var a=new FileProgress(c,this.customSettings.progressTarget);a.setProgress(d);a.setStatus("Uploading...")}catch(b){this.debug(b)}}function uploadSuccess(d,b){try{var a=new FileProgress(d,this.customSettings.progressTarget);a.setComplete();a.setStatus("Complete.");a.toggleCancel(false)}catch(c){this.debug(c)}}function uploadError(c,e,d){try{var a=new FileProgress(c,this.customSettings.progressTarget);a.setError();a.toggleCancel(false);switch(e){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:a.setStatus("Upload Error: "+d);this.debug("Error Code: HTTP Error, File name: "+c.name+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:a.setStatus("Upload Failed.");this.debug("Error Code: Upload Failed, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:a.setStatus("Server (IO) Error");this.debug("Error Code: IO Error, File name: "+c.name+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:a.setStatus("Security Error");this.debug("Error Code: Security Error, File name: "+c.name+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:a.setStatus("Upload limit exceeded.");this.debug("Error Code: Upload Limit Exceeded, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:a.setStatus("Failed Validation.  Upload skipped.");this.debug("Error Code: File Validation Failed, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:if(this.getStats().files_queued===0){document.getElementById(this.customSettings.cancelButtonId).disabled=true}a.setStatus("Cancelled");a.setCancelled();break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:a.setStatus("Stopped");break;default:a.setStatus("Unhandled Error: "+e);this.debug("Error Code: "+e+", File name: "+c.name+", File size: "+c.size+", Message: "+d);break}}catch(b){this.debug(b)}jQuery("#start_button").fadeTo("fast",1)}function uploadComplete(a){if(this.getStats().files_queued===0){document.getElementById(this.customSettings.cancelButtonId).disabled=true}jQuery("#start_button").fadeTo("fast",1);if(typeof(reload_images)!="undefined"){reload_images()}if(typeof updateAll!="undefined"){updateAll(root)}}function queueComplete(b){var a=document.getElementById("divStatus");a.innerHTML=b+" file"+(b===1?"":"s")+" uploaded."}function init_upload(){if(jQuery("#content_page_id").val()){var b={content_id:jQuery("#content_page_id").val(),model_string:jQuery("#content_page_type").val(),join_field:jQuery("#join_field").val()}}else{var b={}}var a={flash_url:"/images/swfupload.swf",upload_url:"/file_upload.php",post_params:b,file_size_limit:"100 MB",file_types:"*.*",file_types_description:"All Files",file_upload_limit:100,file_queue_limit:100,custom_settings:{progressTarget:"fsUploadProgress",cancelButtonId:"btnCancel"},debug:false,button_image_url:"/images/cms/add_files_button.png",button_width:"254",button_height:"27",button_placeholder_id:"spanButtonPlaceHolder",button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_cursor:SWFUpload.CURSOR.HAND,file_queued_handler:fileQueued,file_queue_error_handler:fileQueueError,file_dialog_complete_handler:fileDialogComplete,upload_start_handler:uploadStart,upload_progress_handler:uploadProgress,upload_error_handler:uploadError,upload_success_handler:uploadSuccess,upload_complete_handler:uploadComplete,queue_complete_handler:queueComplete};swfu=new SWFUpload(a)}var swfu;function set_post_params(){var a=jQuery("#dest").html();if(a=="select a folder"){alert("You must choose a folder first");return false}if(!a){var a=jQuery("#wildfire_file_folder").val()}if(jQuery("#upload_from").length&&jQuery("#upload_from").val().length>1){jQuery.post("/file_upload.php?",{wildfire_file_folder:a,wildfire_file_description:jQuery("#wildfire_file_description").val(),upload_from_url:jQuery("#upload_from").val(),wildfire_file_filename:jQuery("#wildfire_file_filename").val(),content_id:jQuery("#url_content_page_id").val(),model_string:jQuery("#url_content_page_type").val(),join_field:jQuery("#url_join_field").val()},function(){jQuery("#start_button").fadeTo("fast",1);alert("Image Successfully Retrieved");if(typeof(reload_images)!="undefined"){reload_images()}});return true}swfu.addPostParam("wildfire_file_folder",a);swfu.addPostParam("wildfire_file_description",jQuery("#wildfire_file_description").val());swfu.startUpload()}jQuery(document).scroll(function(){jQuery("#informationcart").verticalCenter()});jQuery.fn.verticalCenter=function(a){var b=this;if(!a){b.css("top",jQuery(window).height()/2-this.height()/2);jQuery(window).resize(function(){b.centerScreen(!a)})}else{b.stop();b.animate({top:jQuery(window).height()/2-this.height()/2},200,"linear")}};jQuery(document).ready(function(){jQuery("#cms_users .tabs-nav").tabs();initialise_user_draggables();jQuery("#cms_users #section_browser_filter").keyup(function(){if(typeof(t)!="undefined"){clearTimeout(t)}t=setTimeout('delayed_sect_filter(jQuery("#section_browser_filter").val())',400)})});function initialise_user_draggables(){jQuery("#cms_users .section_tag").draggable({containment:"window",ghosting:true,opacity:0.4,revert:true,scroll:false,helper:"clone"});jQuery("#cms_users #sect_dropzone").droppable({accept:".section_tag",hoverClass:"dropzone_active",tolerance:"pointer",drop:function(a,b){jQuery.post("../../add_section/"+content_page_id,{id:b.draggable.attr("id")},function(c){jQuery("#sect_dropzone").html(c);initialise_user_draggables()})}});jQuery("#cms_users .section_trash_button").click(function(){jQuery.get("../../remove_section/"+content_page_id+"?sect="+this.id.substr(21),function(a){jQuery("#sect_dropzone").html(a);initialise_user_draggables()})})}function delayed_sect_filter(a){jQuery("#cms_users #section_browser_filter").css("background","white url(/images/cms/indicator.gif) no-repeat right center");jQuery.ajax({type:"post",url:"/admin/sections/filters",data:"filter="+a,complete:function(b){jQuery("#section_list").html(b.responseText);initialise_user_draggables();if(typeof(t)!="undefined"){clearTimeout(t)}jQuery("#section_browser_filter").css("background","white")}})};