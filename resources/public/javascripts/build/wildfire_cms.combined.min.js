(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms")}this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s)}else{alert(s)}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug=""}var rows=table.tBodies[0].rows;if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter)}else{if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter)}}if(!p){p=detectParserForColumn(table,cells[i])}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n"}list.push(p)}}if(table.config.debug){log(parsersDebug)}return list}function detectParserForColumn(table,node){var l=parsers.length;for(var i=1;i<l;i++){if(parsers[i].is($.trim(getElementText(table.config,node)),table,node)){return parsers[i]}}return parsers[0]}function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i]}}return false}function buildCache(table){if(table.config.debug){var cacheTime=new Date()}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=table.tBodies[0].rows[i],cols=[];cache.row.push($(c));for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]))}cols.push(i);cache.normalized.push(cols);cols=null}if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime)}return cache}function getElementText(config,node){if(!node){return""}var t="";if(config.textExtraction=="simple"){if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){t=node.childNodes[0].innerHTML}else{t=node.innerHTML}}else{if(typeof(config.textExtraction)=="function"){t=config.textExtraction(node)}else{t=$(node).text()}}return t}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){rows.push(r[n[i][checkCell]]);if(!table.config.appender){var o=r[n[i][checkCell]];var l=o.length;for(var j=0;j<l;j++){tableBody[0].appendChild(o[j])}}}if(table.config.appender){table.config.appender(table,rows)}rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime)}applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd")},0)}function buildHeaders(table){if(table.config.debug){var time=new Date()}var meta=($.metadata)?true:false,tableHeadersRows=[];for(var i=0;i<table.tHead.rows.length;i++){tableHeadersRows[i]=0}$tableHeaders=$("thead th",table);$tableHeaders.each(function(index){this.count=0;this.column=index;this.order=formatSortingOrder(table.config.sortInitialOrder);if(checkHeaderMetadata(this)||checkHeaderOptions(table,index)){this.sortDisabled=true}if(!this.sortDisabled){$(this).addClass(table.config.cssHeader)}table.config.headerList[index]=this});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders)}return $tableHeaders}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++))}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell)}}}return arr}function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true}return false}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true}return false}function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table)}}function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i]}}}function formatSortingOrder(v){if(typeof(v)!="Number"){i=(v.toLowerCase()=="desc")?1:0}else{i=(v==(0||1))?v:0}return i}function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true}}return false}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this)}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]])}}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$("<colgroup>");$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($("<col>").css("width",$(this).width()))});$(table).prepend(colgroup)}}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date()}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(getCachedSortType(table.config.parsers,c)=="text")?((order==0)?"sortText":"sortTextDesc"):((order==0)?"sortNumeric":"sortNumericDesc");var e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; "}dynamicExp+="return 0; ";dynamicExp+="}; ";eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime)}return cache}function sortText(a,b){return((a<b)?-1:((a>b)?1:0))}function sortTextDesc(a,b){return((b<a)?-1:((b>a)?1:0))}function sortNumeric(a,b){return a-b}function sortNumericDesc(a,b){return b-a}function getCachedSortType(parsers,i){return parsers[i].type}this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies){return}var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){$this.trigger("sortStart");var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){var $cell=$(this);var i=this.column;this.order=this.count++%2;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j])}}}config.sortList.push([i,this.order])}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2}}}else{config.sortList.push([i,this.order])}}setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache))},1);return false}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false}});$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this)}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache))}).bind("appendCache",function(){appendToTable(this,cache)}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this)}).bind("applyWidgets",function(){applyWidget(this)});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList])}applyWidget(this)})};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false}}if(a){parsers.push(parser)}};this.addWidget=function(widget){widgets.push(widget)};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i};this.isDigit=function(s,config){var DECIMAL="\\"+config.decimal;var exp="/(^[+]?0("+DECIMAL+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+DECIMAL+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+DECIMAL+"0+$)/";return RegExp(exp).test($.trim(s))};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild){this.removeChild(this.firstChild)}}empty.apply(table.tBodies[0])}else{table.tBodies[0].innerHTML=""}}}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true},format:function(s){return $.trim(s.toLowerCase())},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c)},format:function(s){return $.tablesorter.formatFloat(s)},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[Â£$â‚¬?.]/.test(s)},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""))},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s)},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item}else{r+=item}}return $.tablesorter.formatFloat(r)},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s)},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s)},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s))},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""))},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s)},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2")}else{if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1")}else{if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")}}}return $.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s)},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime())},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?"sortValue":c.parserMetadataName;return $(cell).metadata()[p]},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date()}$("tr:visible",table.tBodies[0]).filter(":even").removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(":odd").removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time)}}})})(jQuery);(function(a){a.fn.hint=function(f){if(!f||typeof(f)=="object"){f=a.extend({focus_class:"hint_focus",changed_class:"hint_changed",populate_from:"default",text:null,remove_labels:false},f)}else{if(typeof(f)=="string"&&f.toLowerCase()=="destroy"){var c=true}}return this.each(function(){if(c){b(this).unbind("focus.hint").unbind("blur.hint").removeData("defText");return false}e(b(this))});function e(k){var l="";switch(f.populate_from){case"alt":l=k.attr("alt");k.val(l);break;case"label":l=b("label[for='"+k.attr("id")+"']").text();k.val(l);break;case"custom":l=f.text;k.val(l);break;default:l=k.val()}k.addClass("hint").data("defText",l);if(f.remove_labels==true){b("label[for='"+k.attr("id")+"']").remove()}if(k.attr("type")=="password"){var h=k.data("defText");var j=b('<input type="text"/>');j.attr("name",k.attr("name"));j.attr("size",k.attr("size"));j.attr("class",k.attr("class"));j.val(k.val());j.data("defType","password").data("defText",h);k.replaceWith(j);var k=j}g(k);d(k)}function g(h){h.bind("focus.hint",function(l){var l=b(this);if(l.val()==l.data("defText")){l.val("")}l.addClass(f.focus_class).removeClass(f.changed_class);if(l.data("defType")=="password"){var j=l.data("defText");var k=b('<input type="password"/>');k.attr("name",l.attr("name"));k.attr("size",l.attr("size"));k.attr("class",l.attr("class"));k.val(l.val());k.data("defType","password").data("defText",j);l.replaceWith(k);var l=k;l.focus();d(l)}})}function d(h){h.bind("blur.hint",function(){var l=b(this);if(l.val()==""){l.val(l.data("defText"))}l.removeClass(f.focus_class);if(l.val()!=l.data("defText")){l.addClass(f.changed_class)}else{l.removeClass(f.changed_class)}if(l.data("defType")=="password"&&l.val()==l.data("defText")){var j=l.data("defText");var k=b('<input type="text"/>');k.attr("name",l.attr("name"));k.attr("size",l.attr("size"));k.attr("class",l.attr("class"));k.val(l.val());k.data("defType","password").data("defText",j);l.replaceWith(k);var l=k;g(k)}})}};var b=jQuery})(jQuery);(function(e){var b=Math.abs,a=Math.max,d=Math.min,c=Math.round;function f(){return e("<div/>")}e.imgAreaSelect=function(U,ah){var Q=e(U),z,F=f(),I=f(),au=f().add(f()).add(f()).add(f()),A=f().add(f()).add(f()).add(f()),aB=e([]),an,X,at,aC,W,aE,p,Z,g=0,ao="absolute",ar,aq,af,ae,aD=10,v,q,ap,k,B,aI,al,H,n,G,l,aG={x1:0,y1:0,x2:0,y2:0,width:0,height:0},J=document.documentElement,ad,V,S,R,O,T,M;function ac(h){return h+aC.left-Z.left}function ab(h){return h+aC.top-Z.top}function ay(h){return h-aC.left+Z.left}function ax(h){return h-aC.top+Z.top}function E(h){return h.pageX-Z.left}function D(h){return h.pageY-Z.top}function aw(h){var w=h||af,o=h||ae;return{x1:c(aG.x1*w),y1:c(aG.y1*o),x2:c(aG.x2*w),y2:c(aG.y2*o),width:c(aG.x2*w)-c(aG.x1*w),height:c(aG.y2*o)-c(aG.y1*o)}}function av(o,aJ,h,w,aK){var aM=aK||af,aL=aK||ae;aG={x1:c(o/aM),y1:c(aJ/aL),x2:c(h/aM),y2:c(w/aL)};aG.width=aG.x2-aG.x1;aG.height=aG.y2-aG.y1}function m(){if(!Q.width()){return}aC={left:c(Q.offset().left),top:c(Q.offset().top)};W=Q.width();aE=Q.height();q=ah.minWidth||0;ap=ah.minHeight||0;k=d(ah.maxWidth||1<<24,W);B=d(ah.maxHeight||1<<24,aE);if(e().jquery=="1.3.2"&&ao=="fixed"&&!J.getBoundingClientRect){aC.top+=a(document.body.scrollTop,J.scrollTop);aC.left+=a(document.body.scrollLeft,J.scrollLeft)}Z=e.inArray(p.css("position"),["absolute","relative"])+1?{left:c(p.offset().left)-p.scrollLeft(),top:c(p.offset().top)-p.scrollTop()}:ao=="fixed"?{left:e(document).scrollLeft(),top:e(document).scrollTop()}:{left:0,top:0};X=ac(0);at=ab(0);if(aG.x2>W||aG.y2>aE){aF()}}function N(h){if(!al){return}F.css({left:ac(aG.x1),top:ab(aG.y1)}).add(I).width(O=aG.width).height(T=aG.height);I.add(au).add(aB).css({left:0,top:0});au.width(a(O-au.outerWidth()+au.innerWidth(),0)).height(a(T-au.outerHeight()+au.innerHeight(),0));e(A[0]).css({left:X,top:at,width:aG.x1,height:aE});e(A[1]).css({left:X+aG.x1,top:at,width:O,height:aG.y1});e(A[2]).css({left:X+aG.x2,top:at,width:W-aG.x2,height:aE});e(A[3]).css({left:X+aG.x1,top:at+aG.y2,width:O,height:aE-aG.y2});O-=aB.outerWidth();T-=aB.outerHeight();switch(aB.length){case 8:e(aB[4]).css({left:O/2});e(aB[5]).css({left:O,top:T/2});e(aB[6]).css({left:O/2,top:T});e(aB[7]).css({top:T/2});case 4:aB.slice(1,3).css({left:O});aB.slice(2,4).css({top:T})}if(h!==false){if(e.imgAreaSelect.keyPress!=az){e(document).unbind(e.imgAreaSelect.keyPress,e.imgAreaSelect.onKeyPress)}if(ah.keys){e(document)[e.imgAreaSelect.keyPress](e.imgAreaSelect.onKeyPress=az)}}if(e.browser.msie&&au.outerWidth()-au.innerWidth()==2){au.css("margin",0);setTimeout(function(){au.css("margin","auto")},0)}}function C(h){m();N(h);H=ac(aG.x1);n=ab(aG.y1);G=ac(aG.x2);l=ab(aG.y2)}function ak(h,o){ah.fadeSpeed?h.fadeOut(ah.fadeSpeed,o):h.hide()}function L(o){var h=ay(E(o))-aG.x1,w=ax(D(o))-aG.y1;if(!M){m();M=true;F.one("mouseout",function(){M=false})}v="";if(ah.resizable){if(w<=aD){v="n"}else{if(w>=aG.height-aD){v="s"}}if(h<=aD){v+="w"}else{if(h>=aG.width-aD){v+="e"}}}F.css("cursor",v?v+"-resize":ah.movable?"move":"");if(an){an.toggle()}}function j(h){e("body").css("cursor","");if(ah.autoHide||aG.width*aG.height==0){ak(F.add(A),function(){e(this).hide()})}ah.onSelectEnd(U,aw());e(document).unbind("mousemove",ai);F.mousemove(L)}function aA(h){if(h.which!=1){return false}m();if(v){e("body").css("cursor",v+"-resize");H=ac(aG[/w/.test(v)?"x2":"x1"]);n=ab(aG[/n/.test(v)?"y2":"y1"]);e(document).mousemove(ai).one("mouseup",j);F.unbind("mousemove",L)}else{if(ah.movable){ar=X+aG.x1-E(h);aq=at+aG.y1-D(h);F.unbind("mousemove",L);e(document).mousemove(ag).one("mouseup",function(){ah.onSelectEnd(U,aw());e(document).unbind("mousemove",ag);F.mousemove(L)})}else{Q.mousedown(h)}}return false}function P(h){if(aI){if(h){G=a(X,d(X+W,H+b(l-n)*aI*(G>H||-1)));l=c(a(at,d(at+aE,n+b(G-H)/aI*(l>n||-1))));G=c(G)}else{l=a(at,d(at+aE,n+b(G-H)/aI*(l>n||-1)));G=c(a(X,d(X+W,H+b(l-n)*aI*(G>H||-1))));l=c(l)}}}function aF(){H=d(H,X+W);n=d(n,at+aE);if(b(G-H)<q){G=H-q*(G<H||-1);if(G<X){H=X+q}else{if(G>X+W){H=X+W-q}}}if(b(l-n)<ap){l=n-ap*(l<n||-1);if(l<at){n=at+ap}else{if(l>at+aE){n=at+aE-ap}}}G=a(X,d(G,X+W));l=a(at,d(l,at+aE));P(b(G-H)<b(l-n)*aI);if(b(G-H)>k){G=H-k*(G<H||-1);P()}if(b(l-n)>B){l=n-B*(l<n||-1);P(true)}aG={x1:ay(d(H,G)),x2:ay(a(H,G)),y1:ax(d(n,l)),y2:ax(a(n,l)),width:b(G-H),height:b(l-n)};N();ah.onSelectChange(U,aw())}function ai(h){G=v==""||/w|e/.test(v)||aI?E(h):ac(aG.x2);l=v==""||/n|s/.test(v)||aI?D(h):ab(aG.y2);aF();return false}function Y(h,o){G=(H=h)+aG.width;l=(n=o)+aG.height;e.extend(aG,{x1:ay(H),y1:ax(n),x2:ay(G),y2:ax(l)});N();ah.onSelectChange(U,aw())}function ag(h){H=a(X,d(ar+E(h),X+W-aG.width));n=a(at,d(aq+D(h),at+aE-aG.height));Y(H,n);h.preventDefault();return false}function r(){m();G=H;l=n;aF();v="";if(A.is(":not(:visible)")){F.add(A).hide().fadeIn(ah.fadeSpeed||0)}al=true;e(document).unbind("mouseup",aa).mousemove(ai).one("mouseup",j);F.unbind("mousemove",L);ah.onSelectStart(U,aw())}function aa(){e(document).unbind("mousemove",r);ak(F.add(A));aG={x1:ay(H),y1:ax(n),x2:ay(H),y2:ax(n),width:0,height:0};ah.onSelectChange(U,aw());ah.onSelectEnd(U,aw())}function aH(h){if(h.which!=1||A.is(":animated")){return false}m();ar=H=E(h);aq=n=D(h);e(document).one("mousemove",r).one("mouseup",aa);return false}function am(){C(false)}function u(){z=true;aj(ah=e.extend({classPrefix:"imgareaselect",movable:true,resizable:true,parent:"body",onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},ah));F.add(A).css({visibility:""});if(ah.show){al=true;m();N();F.add(A).hide().fadeIn(ah.fadeSpeed||0)}setTimeout(function(){ah.onInit(U,aw())},0)}var az=function(aJ){var h=ah.keys,aK,w,o=aJ.keyCode;aK=!isNaN(h.alt)&&(aJ.altKey||aJ.originalEvent.altKey)?h.alt:!isNaN(h.ctrl)&&aJ.ctrlKey?h.ctrl:!isNaN(h.shift)&&aJ.shiftKey?h.shift:!isNaN(h.arrows)?h.arrows:10;if(h.arrows=="resize"||(h.shift=="resize"&&aJ.shiftKey)||(h.ctrl=="resize"&&aJ.ctrlKey)||(h.alt=="resize"&&(aJ.altKey||aJ.originalEvent.altKey))){switch(o){case 37:aK=-aK;case 39:w=a(H,G);H=d(H,G);G=a(w+aK,H);P();break;case 38:aK=-aK;case 40:w=a(n,l);n=d(n,l);l=a(w+aK,n);P(true);break;default:return}aF()}else{H=d(H,G);n=d(n,l);switch(o){case 37:Y(a(H-aK,X),n);break;case 38:Y(H,a(n-aK,at));break;case 39:Y(H+d(aK,W-ay(G)),n);break;case 40:Y(H,n+d(aK,aE-ax(l)));break;default:return}}return false};function K(h,o){for(option in o){if(ah[option]!==undefined){h.css(o[option],ah[option])}}}function aj(h){if(h.parent){(p=e(h.parent)).append(F.add(A))}e.extend(ah,h);m();if(h.handles!=null){aB.remove();aB=e([]);S=h.handles?h.handles=="corners"?4:8:0;while(S--){aB=aB.add(f())}aB.addClass(ah.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:g+1||1});if(!parseInt(aB.css("width"))){aB.width(5).height(5)}if(R=ah.borderWidth){aB.css({borderWidth:R,borderStyle:"solid"})}K(aB,{borderColor1:"border-color",borderColor2:"background-color",borderOpacity:"opacity"})}af=ah.imageWidth/W||1;ae=ah.imageHeight/aE||1;if(h.x1!=null){av(h.x1,h.y1,h.x2,h.y2);h.show=!h.hide}if(h.keys){ah.keys=e.extend({shift:1,ctrl:"resize"},h.keys)}A.addClass(ah.classPrefix+"-outer");I.addClass(ah.classPrefix+"-selection");for(S=0;S++<4;){e(au[S-1]).addClass(ah.classPrefix+"-border"+S)}K(I,{selectionColor:"background-color",selectionOpacity:"opacity"});K(au,{borderOpacity:"opacity",borderWidth:"border-width"});K(A,{outerColor:"background-color",outerOpacity:"opacity"});if(R=ah.borderColor1){e(au[0]).css({borderStyle:"solid",borderColor:R})}if(R=ah.borderColor2){e(au[1]).css({borderStyle:"dashed",borderColor:R})}F.append(I.add(au).add(aB).add(an));if(e.browser.msie){if(R=A.css("filter").match(/opacity=([0-9]+)/)){A.css("opacity",R[1]/100)}if(R=au.css("filter").match(/opacity=([0-9]+)/)){au.css("opacity",R[1]/100)}}if(h.hide){ak(F.add(A))}else{if(h.show&&z){al=true;F.add(A).fadeIn(ah.fadeSpeed||0);C()}}aI=(V=(ah.aspectRatio||"").split(/:/))[0]/V[1];if(ah.disable||ah.enable===false){F.unbind("mousemove",L).unbind("mousedown",aA);Q.add(A).unbind("mousedown",aH);e(window).unbind("resize",am)}else{if(ah.enable||ah.disable===false){if(ah.resizable||ah.movable){F.mousemove(L).mousedown(aA)}if(!ah.persistent){Q.add(A).mousedown(aH)}e(window).resize(am)}}ah.enable=ah.disable=undefined}this.remove=function(){Q.unbind("mousedown",aH);F.add(A).remove()};this.getOptions=function(){return ah};this.setOptions=aj;this.getSelection=aw;this.setSelection=av;this.update=C;ad=Q;while(ad.length){g=a(g,!isNaN(ad.css("z-index"))?ad.css("z-index"):g);if(ad.css("position")=="fixed"){ao="fixed"}ad=ad.parent(":not(body)")}g=ah.zIndex||g;if(e.browser.msie){Q.attr("unselectable","on")}e.imgAreaSelect.keyPress=e.browser.msie||e.browser.safari?"keydown":"keypress";if(e.browser.opera){an=f().css({width:"100%",height:"100%",position:"absolute",zIndex:g+2||2})}F.add(A).css({visibility:"hidden",position:ao,overflow:"hidden",zIndex:g||"0"});F.css({zIndex:g+2||2});I.add(au).css({position:"absolute",fontSize:0});U.complete||U.readyState=="complete"||!Q.is("img")?u():Q.one("load",u)};e.fn.imgAreaSelect=function(g){g=g||{};this.each(function(){if(e(this).data("imgAreaSelect")){if(g.remove){e(this).data("imgAreaSelect").remove();e(this).removeData("imgAreaSelect")}else{e(this).data("imgAreaSelect").setOptions(g)}}else{if(!g.remove){if(g.enable===undefined&&g.disable===undefined){g.enable=true}e(this).data("imgAreaSelect",new e.imgAreaSelect(this,g))}}});if(g.instance){return e(this).data("imgAreaSelect")}return this}})(jQuery);jQuery(document).ready(function(){if(jQuery("#item_list_container")&&jQuery.isFunction(jQuery.tablesorter)){jQuery("#item_list_container").tablesorter({dateFormat:"dd/mm/yyyy",highlightClass:"highlight_col",stripingRowClass:["item_row1","item_row0"],stripeRowsOnStartUp:true})}if(jQuery(".form_datepicker")){jQuery(".form_datepicker").datepicker({changeMonth:true,changeYear:true,dateFormat:"dd-MM-yy"})}jQuery("input.disable_enter").bind("keypress",function(a){return a.keyCode==13?false:true});jQuery("#item_list_container .list_button a").click(function(){jQuery(this).parent().next().toggle();return false})});jQuery(document).ready(function(){inline_status_change()});function inline_status_change(){if(jQuery(".status_change")){jQuery(".status_change").live("click",function(){if(!confirm("Are you sure you want to change the publish status?")){return false}current_status=jQuery(this).attr("rel");dest=jQuery(this).attr("href");dest=dest.replace("?status=0","").replace("?status=1","");replace="#"+this.id;jQuery.get(dest,{status:current_status,ajax:"yes"},function(a){jQuery(replace).replaceWith(a)});return false})}}jQuery.fn.centerScreen=function(a){var b=this;if(!a){b.css("top",jQuery(window).height()/2-this.height()/2);b.css("left",jQuery(window).width()/2-this.width()/2);jQuery(window).resize(function(){b.centerScreen(!a)})}else{b.stop();b.animate({top:jQuery(window).height()/2-this.height()/2,left:jQuery(window).width()/2-this.width()/2},200,"linear")}};jQuery(document).ready(function(){jQuery(".group_permission_check .group_toggle").change(function(){if($(this).is(":checked")){$(this).parent().find(".permission_check input").attr("checked",true)}else{$(this).parent().find(".permission_check input").removeAttr("checked")}})});jQuery(document).ready(function(){var b=jQuery("#header-container");var a=b.outerHeight()+90;jQuery(window).resize(function(){var c=jQuery(window).height();if(c<a){c=a}b.css("height",c)});jQuery(window).trigger("resize")});var content_page_id;var model_string;var init_upload;var autosaver;var inline_image_filter_timer;var use_old_draggables=false;wym_editors=[];if(typeof(file_browser_location)=="undefined"){var file_browser_location="/admin/files/browse_images"}if(typeof(file_options_location)=="undefined"){var file_options_location="/admin/files/file_options"}var file_mime_type="image";jQuery(document).ready(function(){use_old_draggables=(jQuery("#category_list")&&jQuery("#category_list").length)?true:false;jQuery("#container").tabs();jQuery("#page_tab_title").html(jQuery("#cms_content_title").val());jQuery("#cms_content_title").keyup(function(){jQuery("#page_tab_title").html(jQuery("#cms_content_title").val())});jQuery("#new_cat_create").click(function(){jQuery.ajax({url:"../../new_category/?cat="+jQuery("#new_cat").val(),complete:function(b){jQuery("#new_cat_create").parents(".category_browser").find(".category_list, #category_list").html(b.responseText)}});return false});if(use_old_draggables){initialise_draggables()}else{many_to_many_joins()}if(jQuery("#copy_permissions_from").length>0){jQuery("#copy_permissions_from").change(function(){jQuery.get("../../copy_permissions_from/"+content_page_id+"?copy_from="+jQuery(this).val(),function(b){window.location.reload()});return false})}jQuery("#link_dialog").dialog({modal:true,autoOpen:false,resizable:false,title:"Insert",width:"auto",height:"auto",buttons:{Insert:function(){var b=$(this).data("execute_on_insert");if(typeof b=="function"){b()}jQuery(this).dialog("close")},Cancel:function(){$(this).dialog("close")}},close:function(){jQuery(this).removeData("execute_on_insert");jQuery(this).dialog("option","title","Insert")}});jQuery("#link_dialog #link_file").change(link_dialog_file_choose);function a(){jQuery.get(file_browser_location,{filter:jQuery(".inline_image_dialog .filter_field").val(),filterfolder:jQuery(".inline_image_dialog .filter_image_folder .image_folder").val()},function(b){jQuery(".inline_image_dialog .image_display").html(b);init_inline_image_select(jQuery(".inline_image_dialog").data("wym"));clearTimeout(inline_image_filter_timer)})}jQuery(".inline_image_dialog .filter_field").keyup(function(b){if(b.which==8||b.which==32||(48<=b.which&&b.which<=57)||(65<=b.which&&b.which<=90)||(97<=b.which&&b.which<=122)||b.which==160||b.which==127){clearTimeout(inline_image_filter_timer);inline_image_filter_timer=setTimeout(a,800)}});jQuery(".inline_image_dialog .filter_image_folder .image_folder").change(function(){a()});jQuery(".inline_image_dialog").dialog({modal:true,autoOpen:false,title:"Insert an Image",width:740,height:"auto",close:function(){jQuery(this).removeData("wym");jQuery(this).removeData("existing_image");jQuery(this).find(".selected_image img").attr("src","/images/cms/add_image_blank.gif");jQuery(this).find(".meta_description").val("");jQuery(this).find(".inline_image_link").val("");jQuery(this).find(".image_folder").val("")},buttons:{Insert:function(){var g=jQuery(this).data("wym");var d=jQuery(this).data("existing_image");var c="inline_image "+jQuery("input:radio[name=flow]:checked").val();if(d&&d.length){var b=d.parent();if(b[0].tagName.toLowerCase()=="a"){var f=b}d.attr("class",c);d.attr("src",jQuery(".selected_image img").attr("src"));d.attr("alt",jQuery(".inline_image_dialog .meta_description").val())}else{var e='<img style="" src="'+jQuery(".selected_image img").attr("src")+'" class="'+c+'" alt="'+jQuery(".inline_image_dialog .meta_description").val()+'" />';if(jQuery(".inline_image_link").val().length>1){e='<a href="'+jQuery(".inline_image_link").val()+'">'+e+"</a>"}g.insert(e)}initialise_inline_image_edit(g);jQuery(this).dialog("close")},Cancel:function(){jQuery(this).dialog("close")}}});jQuery("#paste_word").dialog({modal:true,autoOpen:false,title:"Paste From Word",width:"auto",buttons:{Insert:function(){var b=jQuery(this).data("wym");b.insert(jQuery(".wym_text").val());jQuery(this).dialog("close")},Cancel:function(){jQuery(this).dialog("close")}}});jQuery("#table_dialog").dialog({modal:true,autoOpen:false,title:"Insert a Table",width:"auto",buttons:{Insert:function(){var h=jQuery(this).data("wym");var b=jQuery(".wym_caption").val();var c=jQuery(".wym_summary").val();var f=jQuery(".wym_rows").val();var g=jQuery(".wym_cols").val();var e="";if(f>0&&g>0){var d=h._doc.createElement(WYMeditor.TABLE);e="<table>";e+="<caption>"+b+"</caption>";for(x=0;x<f;x++){e+="<tr>";for(y=0;y<g;y++){e+="<td></td>"}e+="</tr>"}e+="</table>"}h.insert(e);jQuery(this).dialog("close")},Cancel:function(){jQuery(this).dialog("close")}}});jQuery("#quick_upload_pane").dialog({modal:true,autoOpen:false,title:"Upload an Image",width:670,height:480});jQuery("#upload_url_pane").dialog({modal:true,autoOpen:false,title:"Get Image From URL",width:670,height:480});jQuery("#quick_upload_button").click(function(){jQuery("#quick_upload_pane").dialog("open");jQuery.ajax({url:"/admin/files/quickupload/"+content_page_id+"?model="+model_string+"&join_field="+join_field,complete:function(b){jQuery("#quick_upload_pane").html(b.responseText);init_upload()}});return false});jQuery("#upload_url_button").click(function(){jQuery("#upload_url_pane").dialog("open");jQuery.ajax({url:"/admin/files/upload_url/"+content_page_id+"?model="+model_string+"&join_field="+join_field,complete:function(b){jQuery("#upload_url_pane").html(b.responseText)},global:false});return false})});function initialise_draggables(){jQuery("#category_list .category_tag, .category_list .category_tag").live("dblclick",function(){var b=this,a="../../add_category/";jQuery.post(a+content_page_id,{tagid:this.id,id:this.id},function(c){jQuery(b).parents(".category_browser").children("#cat_dropzone, .cat_dropzone").html(c)});return false});jQuery(".cat_dropzone .category_trash_button").live("dblclick",function(){var c=this,a="../../remove_category/",b=this.id.substr(22);jQuery.get(a+content_page_id+"?cat="+b,function(d){jQuery(c).parents(".category_browser").children("#cat_dropzone, .cat_dropzone").html(d)});return false})}function init_deletes(){}function delayed_cat_filter(a){jQuery("#category_filter").css("background","white url(/images/cms/indicator.gif) no-repeat right center");jQuery.ajax({type:"post",url:"/admin/categories/filters",data:{filter:a},success:function(b){jQuery("#category_filter").parents(".category_browser").children(".category_list, #category_list").html(b);if(typeof(t)!="undefined"){clearTimeout(t)}jQuery("#category_filter").css("background","white")}})}function delayed_image_filter(a){jQuery("#image_filter").css("background","white url(/images/cms/indicator.gif) no-repeat right center");jQuery.ajax({type:"get",url:file_browser_location,data:{mime_type:file_mime_type,filter:jQuery("#image_filter").val()},success:function(b){jQuery("#image_list").html(b);initialise_images();if(typeof(t)!="undefined"){clearTimeout(t)}jQuery("#image_filter").css("background","white")}})}jQuery(document).ready(function(a){jQuery("#image_filter").keyup(function(){if(typeof(t)!="undefined"){clearTimeout(t)}t=setTimeout('delayed_image_filter(jQuery("#image_filter").val())',400)});jQuery("#category_filter").keyup(function(){if(typeof(t)!="undefined"){clearTimeout(t)}t=setTimeout('delayed_cat_filter(jQuery("#category_filter").val())',400)});jQuery("#image_filter").focus(function(){if(jQuery(this).val()=="Filter"){jQuery(this).val("")}});jQuery("#category_filter").focus(function(){if(jQuery(this).val()=="Filter"){jQuery(this).val("")}});jQuery("#category_filter").blur(function(){if(jQuery(this).val()==""){jQuery(this).val("Filter")}});jQuery("#wildfire_file_new_folder").change(function(b){jQuery.post(file_browser_location,{filterfolder:jQuery(this).val(),mime_type:file_mime_type},function(c){jQuery("#image_list").html(c);initialise_images()})});jQuery("#view_all_button").click(function(){jQuery.post(file_browser_location,{mime_type:file_mime_type},function(b){jQuery("#image_list").html(b);initialise_images()})});jQuery.get(file_browser_location,{mime_type:file_mime_type},function(b){jQuery("#image_list").html(b);initialise_images()});jQuery(".jqwysi").wymeditor({skinPath:"/stylesheets/wymeditor/wildfire/",skin:"wildfire",containersItems:wildfire_containersItems,stylesheet:"/stylesheets/wymeditor/wysiwyg_styles.css",toolsHtml:"<ul class='wym_tools wym_section'>"+WYMeditor.TOOLS_ITEMS+WYMeditor.CLASSES+"</ul>",toolsItemHtml:"<li class='"+WYMeditor.TOOL_CLASS+"'><a href='#' name='"+WYMeditor.TOOL_NAME+"' title='"+WYMeditor.TOOL_TITLE+"'>"+WYMeditor.TOOL_TITLE+"</a></li>",classesHtml:"<li class='wym_tools_class subnav'><a href='#' name='css' title='css' class='dd'></a><ul class='wym_classes wym_classes_hidden'>"+WYMeditor.CLASSES_ITEMS+"</ul></li>",classesItemHtml:"<li><a href='#' name='"+WYMeditor.CLASS_NAME+"' class='issub'>"+WYMeditor.CLASS_TITLE+"</a></li>",classesItemHtmlMultiple:"<li class='wym_tools_class_multiple_rules'><span>"+WYMeditor.CLASS_TITLE+"</span><ul>{classesItemHtml}</ul></li>",containersHtml:"<ul class='wym_containers wym_section'>"+WYMeditor.CONTAINERS_ITEMS+"</ul>",containersItemHtml:"<li class='"+WYMeditor.CONTAINER_CLASS+"'><a href='#' name='"+WYMeditor.CONTAINER_NAME+"' title='"+WYMeditor.CONTAINER_TITLE+"'></a></li>",boxHtml:"<div class='wym_box'><div class='wym_area_top'>"+WYMeditor.CONTAINERS+WYMeditor.TOOLS+"</div><div class='wym_area_main'>"+WYMeditor.HTML+WYMeditor.IFRAME+WYMeditor.STATUS+"</div></div>",postInit:function(b){b.wildfire(b);wym_editors.push(b);jQuery(".wym_containers").removeClass("wym_dropdown");jQuery(".wym_iframe, iframe").css("height","100%");jQuery(window).resize(calc_wym_height);calc_wym_height()}});if(jQuery("#quicksave").length){autosaver=setInterval(function(){autosave_content(wym_editors)},40000);jQuery("#autosave").click(function(){autosave_content(wym_editors)})}$("#show_advanced").click(function(){$("#advanced_options").slideToggle(100)})});function calc_wym_height(){var c=jQuery("#section-1 .wym_area_main");var b=jQuery("#footer").outerHeight()+jQuery("#section-1 .content_options").outerHeight()+jQuery("#submit").outerHeight();var a=jQuery(window).height()-c.offset().top-b-15;if(a<200){a=200}c.css("height",a)}function initialise_images(){jQuery(".drag_image").draggable({opacity:0.5,revert:true,scroll:true,containment:"window",helper:"clone"});jQuery(".remove_image").click(function(){jQuery.get("../../remove_image/"+content_page_id+"?image="+this.id.substr(13)+"&order="+this.parentNode.id.substr(8),function(a){jQuery("#drop_zones").html(a);initialise_images()});return false});jQuery("#drop_zones").sortable({update:function(a,b){jQuery.post("../../sort_images/"+content_page_id,{sort:[$(a.target).sortable("serialize")]},function(c){jQuery("#drop_zones").html(c);initialise_images();return true})}});jQuery(".paginate_images").click(function(){jQuery.get(file_browser_location+"/"+this.id.substr(12)+"?pg=1&mime_type="+file_mime_type,{},function(a){jQuery("#image_list").html(a);initialise_images()})});jQuery("#drop_zones").droppable({accept:".drag_image",hoverClass:"dropzone_active",tolerance:"pointer",drop:function(a,b){jQuery.post("../../add_image/"+content_page_id,{id:b.draggable.attr("id"),order:jQuery(".dropped_image").size()},function(c){jQuery("#drop_zones").html(c);initialise_images();return true})}});jQuery(".url_image").click(function(){jQuery.get("/admin/files/image_urls/"+jQuery(this).attr("id").replace("url_image_",""),function(a){jQuery("<div>"+a+"</div>").dialog({title:"Image URL",width:700}).dialog("open")})});jQuery(".add_image").unbind("click");jQuery(".add_image").click(function(){jQuery.post("../../add_image/"+content_page_id,{id:jQuery(this).attr("id").replace("add_image_",""),order:jQuery(".dropped_image").size()},function(a){jQuery("#drop_zones").html(a);initialise_images()});return false})}function get_query_var(c,a){var c=c.substring((c.indexOf("?")+1));var d=c.split("&");for(var b=0;b<d.length;b++){var e=d[b].split("=");if(e[0]==a){return e[1]}}}jQuery(document).ready(function(){if(!a){var a="images"}});function reload_images(){jQuery.post(file_browser_location,{filterfolder:jQuery("#wildfire_file_new_folder").val(),mime_type:file_mime_type},function(a){jQuery("#image_list").html(a);initialise_images()});jQuery.get("../../attached_images/"+content_page_id,function(a){jQuery("#drop_zones").html(a);initialise_images()})}function cms_insert_url(a){if(a=="web"){var b=prompt("Enter the URL for this link:","http://")}else{var b=a}if(b!=null){theIframe.contentWindow.document.execCommand("CreateLink",false,b);theWidgEditor.theToolbar.setState("Link","on")}}function cms_insert_video(b,d,a,c){if(c.length>0){theIframe.contentWindow.document.execCommand("inserthtml",false,"<a href='"+b+"' rel='"+d+"px:"+a+"px'>LOCAL:"+c+"</a>")}else{theIframe.contentWindow.document.execCommand("inserthtml",false,"<a href='"+b+"' rel='"+d+"px:"+a+"px'>"+b+"</a>")}theWidgEditor.theToolbar.setState("Video","on")}jQuery(document).ready(function(){jQuery("#autosave_disable").click(function(){clearInterval(autosaver);jQuery("#autosave_status").html("Autosave Disabled")})});function autosave_content(d,b){for(var c in d){d[c].update()}var a={url:"/admin/content/autosave/"+content_page_id,beforeSend:function(){jQuery("#quicksave").effect("pulsate",{times:3},1000)},type:"POST",global:false,processData:false,data:jQuery("#content_edit_form").serialize(),success:function(e){jQuery("#autosave_status").html("Saved at "+e);jQuery("#ajaxBusy").hide()}};if(b){a.global=true;a.async=false}jQuery.ajax(a)}function open_modal_preview(a){jQuery("body").append('<div id="modal_preview_window"><iframe src="" /></div>');jQuery("#modal_preview_window").dialog({autoOpen:false,width:(0.9*jQuery(window).width()),height:(0.9*jQuery(window).height()),modal:true,close:function(b,c){jQuery(this).remove()}});jQuery("#modal_preview_window iframe").attr("src","").attr("src",a).load(function(){jQuery("#modal_preview_window").dialog("open");jQuery("#modal_preview_window iframe").css({width:"100%",height:"98%",border:"none"})})}jQuery(document).ready(function(){jQuery("a.modal_preview").click(function(){open_modal_preview(jQuery(this).attr("href"));return false})});jQuery(document).ready(function(){jQuery("#preview_link").unbind("click").click(function(){var a=jQuery(this);autosave_content(wym_editors,true);if(a.hasClass("modal_preview")){open_modal_preview(a.attr("href"));return false}})});jQuery(document).ready(function(){jQuery("#content_title_edit").hover(function(){var a=jQuery(this).parent();a.css("background-color","#fbf485");jQuery(this).bind("click.editable",function(){jQuery(this).unbind("click.editable");el='<input type="text" value="'+jQuery("#content_title_label").text()+'" id="content_title_editing" />';elsave=jQuery("<a href='#' id='content_edit_save'><img src='/images/cms/cms_quick_save.gif'</a>");a.parent().after(el);jQuery("#content_title_editing").before(elsave);jQuery("#content_edit_save").css({position:"relative",left:"255px",top:"10px",width:"0px",cursor:"pointer"});elsave.click(function(){jQuery("#content_title").show();jQuery("#content_title_label").html(jQuery("#content_title_editing").val());jQuery("#content_title_editing").remove();jQuery(this).remove()});jQuery("#content_title").hide();jQuery("#content_title_editing").change(function(){var b=jQuery("#content_title").attr("rel");jQuery("#"+b).val(jQuery(this).val())});jQuery("#content_title_editing").blur(function(){jQuery("#content_title").show();jQuery("#content_title_label").html(jQuery("#content_title_editing").val());jQuery("#content_title_editing").remove();jQuery("#content_edit_save").remove()});jQuery("#content_title_editing").get(0).focus()})},function(){var a=jQuery(this).parent();a.css("background-color","transparent");jQuery(this).unbind("click.editable")})});jQuery(document).ready(function(){jQuery("body").append('<div id="ajaxBusy"><p>Loading<br /><img src="/images/cms/indicator_dark.gif"></p></div>');jQuery("#ajaxBusy").css({display:"none",margin:"0",position:"absolute",background:"#333",textAlign:"center",fontSize:"100%",color:"#999",letterSpacing:"5px",textTransform:"uppercase",border:"1px solid #c1c1c1",width:"200px",height:"90px","-webkit-box-shadow":"5px 5px 5px #666","-moz-box-shadow":"5px 5px 5px #666",lineHeight:"190%","-webkit-border-radius":"7px","-moz-border-radius":"7px"});jQuery(document).ajaxStart(function(a){if(jQuery("#ajaxBusy")&&jQuery("#ajaxBusy").length){jQuery("#ajaxBusy").show().centerScreen()}});jQuery(document).ajaxStop(function(){if(jQuery("#ajaxBusy")&&jQuery("#ajaxBusy").length){jQuery("#ajaxBusy").hide()}});jQuery(document).ajaxError(function(){if(jQuery("#ajaxBusy")&&jQuery("#ajaxBusy").length){jQuery("#ajaxBusy").hide()}})});function link_dialog_file_choose(){jQuery(this).closest("#link_dialog").find("#link_url").val(jQuery(this).val())}function many_to_many_joins(){jQuery(".custom-join .category_tag, .custom-join .category_trash_button").unbind("draggable droppable dblclick click");jQuery(".custom-join .category_list .category_tag").live("dblclick",function(){var b=jQuery(this).parents("div.custom-join"),a=jQuery(this).attr("id").replace("tag_",""),c=b.attr("data-origin-id"),d={scope:b.attr("data-scope"),targetid:a,origin_id:c,targetmodel:b.attr("data-target-model"),joinname:b.attr("data-join-name")},e="../../custom_add/";jQuery.ajax({type:"post",url:e,data:d,success:function(f){b.html(f)}})});jQuery(".custom-join .category_trash_button").live("dblclick",function(){var b=jQuery(this).parents("div.custom-join"),a=jQuery(this).attr("id").replace("delete_category_button",""),c=b.attr("data-origin-id"),d={scope:b.attr("data-scope"),targetid:a,origin_id:c,targetmodel:b.attr("data-target-model"),joinname:b.attr("data-join-name")},e="../../custom_delete/";jQuery.ajax({type:"post",url:e,data:d,success:function(f){b.html(f)}})})}jQuery(document).ready(function(){jQuery("#cms_content_language").change(function(){var a=window.location.href.split("?");window.location.replace(a[0]+"?lang="+jQuery(this).val())})});jQuery(document).ready(function(){jQuery("#dashboard #sub-navigation-container #quick_search").remove();jQuery("#quick_search form input, #quick_create form input, #filter_form #filter_field").hint();jQuery("#live_search_field").keyup(function(){if(typeof(t)!="undefined"){clearTimeout(t)}t=setTimeout(function(){live_search(jQuery("#live_search_field").val())},400)});jQuery(".live_search_results").hover(function(){},function(){s=setTimeout("live_search_close()",800)});if(jQuery("#statistics").length){jQuery("#statistics").load("/admin/home/stats",function(){jQuery(this).css("background-image","none");jQuery(this).find("#container").tabs()})}});function live_search(a){jQuery("#live_search_field").css("background","white url(/images/cms/indicator.gif) no-repeat right center");jQuery.ajax({type:"post",url:"/admin/home/search",data:"button_text=Edit&input="+a,complete:function(b){jQuery("#live_search_field").parent().find(".live_search_results").html(b.responseText).show();if(typeof(t)!="undefined"){clearTimeout(t)}jQuery("#live_search_field").css("background","white")}})}function live_search_close(){if(typeof(s)!="undefined"){clearTimeout(s)}jQuery(".live_search_results").empty();jQuery(".live_search_results").hide()}jQuery(document).ready(function(){var a=function(){var d=jQuery(this);jQuery.ajax({url:d.attr("href")+"?ajax=1",global:false,success:function(e){d.closest(".related_list").html(e).find(".delete_button a").click(a)}});return false};jQuery(".related_list .delete_button a").click(a);jQuery(".add_related").click(function(){var d=jQuery(this);jQuery.ajax({url:d.attr("href"),data:d.closest(".related_holder").find("input").serialize()+"&ajax=1",type:"POST",global:false,success:function(e){d.closest(".related_holder").find(".related_list").html(e).find(".delete_button a").click(a);d.siblings("input[type='text']").val("")}});return false});jQuery(".related_holder input[name='cms_related[title]'], .related_holder input[name='cms_related[url]']").keyup(function(){var d=jQuery(this);if(typeof(t)!="undefined"){clearTimeout(t)}if(jQuery(this).attr("id")=="cms_related_url"){jQuery("#cms_related_dest_model, #cms_related_dest_id").val("")}if(d.val().length){t=setTimeout(function(){c(d.val())},400)}});jQuery(".live_search_results").hover(function(){},function(){s=setTimeout(b,800)});var c=function(d){jQuery.ajax({type:"post",url:"/admin/home/search",data:"button_text=Link&input="+d,complete:function(e){if(typeof(t)!="undefined"){clearTimeout(t)}jQuery(".related_holder .live_search_results").html(e.responseText).show().find("a").click(function(){var f=jQuery(this);jQuery("#cms_related_dest_model").val(f.attr("data-model"));jQuery("#cms_related_dest_id").val(f.attr("data-id"));jQuery("#cms_related_title").val(f.attr("data-title"));jQuery("#cms_related_url").val(f.attr("data-url"));b();return false})}})};var b=function(){if(typeof(s)!="undefined"){clearTimeout(s)}jQuery(".live_search_results").empty();jQuery(".live_search_results").hide()}});var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(a){this.initSWFUpload(a)}}SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(a){delete SWFUpload.instances[this.movieName];throw a}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(a){if(typeof(a)!=="string"||a.match(/^https?:\/\//i)||a.match(/^\//)){return a}var c=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var b=window.location.pathname.lastIndexOf("/");if(b<=0){path="/"}else{path=window.location.pathname.substr(0,b)+"/"}return path+a};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(b,a){this.settings[b]=(this.settings[b]==undefined)?a:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var a,b;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(a==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var b=this.buildParamString();var a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var c=this.settings.post_params;var b=[];if(typeof(c)==="object"){for(var a in c){if(c.hasOwnProperty(a)){b.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(c[a].toString()))}}}return b.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var a=null;a=this.getMovieElement();if(a&&typeof(a.CallFunction)==="unknown"){for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(e){}}try{a.parentNode.removeChild(a)}catch(b){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(d){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(b,c,a){if(c==undefined){return(this.settings[b]=a)}else{return(this.settings[b]=c)}};SWFUpload.prototype.getSetting=function(a){if(this.settings[a]!=undefined){return this.settings[a]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,b){if(b!==false){b=true}this.callFlash("CancelUpload",[a,b])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};SWFUpload.prototype.getFile=function(a){if(typeof(a)==="number"){return this.callFlash("GetFileByIndex",[a])}else{return this.callFlash("GetFile",[a])}};SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};SWFUpload.prototype.setHTTPSuccess=function(a){if(typeof a==="string"){a=a.replace(" ","").split(",")}this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};SWFUpload.prototype.setButtonImageURL=function(a){if(a==undefined){a=""}this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(c,a){this.settings.button_width=c;this.settings.button_height=a;var b=this.getMovieElement();if(b!=undefined){b.style.width=c+"px";b.style.height=a+"px"}this.callFlash("SetButtonDimensions",[c,a])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};SWFUpload.prototype.setButtonTextPadding=function(b,a){this.settings.button_text_top_padding=a;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,a])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};SWFUpload.prototype.queueEvent=function(b,c){if(c==undefined){c=[]}else{if(!(c instanceof Array)){c=[c]}}var a=this;if(typeof this.settings[b]==="function"){this.eventQueue.push(function(){this.settings[b].apply(this,c)});setTimeout(function(){a.executeNextEvent()},0)}else{if(this.settings[b]!==null){throw"Event handler "+b+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;if(typeof(a)==="function"){a.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(c){var e=/[$]([0-9a-f]{4})/i;var f={};var d;if(c!=undefined){for(var a in c.post){if(c.post.hasOwnProperty(a)){d=a;var b;while((b=e.exec(d))!==null){d=d.replace(b[0],String.fromCharCode(parseInt("0x"+b[1],16)))}f[d]=c.post[a]}}c.post=f}return c};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return false}};SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();if(!a){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(a);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&typeof(a.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(b){}}}}catch(d){}window.__flash__removeCallback=function(e,f){try{if(e){e[f]=null}}catch(g){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,c,b])};SWFUpload.prototype.fileDialogComplete=function(b,c,a){this.queueEvent("file_dialog_complete_handler",[b,c,a])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler==="function"){a=this.unescapeFilePostParams(a);b=this.settings.upload_start_handler.call(this,a)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(b===undefined){b=true}b=!!b;this.callFlash("ReturnUploadStart",[b])};SWFUpload.prototype.uploadProgress=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,c,b])};SWFUpload.prototype.uploadError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,c,b])};SWFUpload.prototype.uploadSuccess=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("upload_success_handler",[b,a,c])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};SWFUpload.prototype.debugMessage=function(c){if(this.settings.debug){var a,d=[];if(typeof c==="object"&&typeof c.name==="string"&&typeof c.message==="string"){for(var b in c){if(c.hasOwnProperty(b)){d.push(b+": "+c[b])}}a=d.join("\n")||"";d=a.split("\n");a="EXCEPTION: "+d.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(a)}else{SWFUpload.Console.writeLine(c)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(d){var b,a;try{b=document.getElementById("SWFUpload_Console");if(!b){a=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(a);b=document.createElement("textarea");b.id="SWFUpload_Console";b.style.fontFamily="monospace";b.setAttribute("wrap","off");b.wrap="off";b.style.overflow="auto";b.style.width="700px";b.style.height="350px";b.style.margin="5px";a.appendChild(b)}b.value+=d+"\n";b.scrollTop=b.scrollHeight-b.clientHeight}catch(c){alert("Exception: "+c.name+" Message: "+c.message)}};var SWFUpload;if(typeof(SWFUpload)==="function"){SWFUpload.queue={};SWFUpload.prototype.initSettings=(function(a){return function(){if(typeof(a)==="function"){a.call(this)}this.customSettings.queue_cancelled_flag=false;this.customSettings.queue_upload_count=0;this.settings.user_upload_complete_handler=this.settings.upload_complete_handler;this.settings.upload_complete_handler=SWFUpload.queue.uploadCompleteHandler;this.settings.queue_complete_handler=this.settings.queue_complete_handler||null}})(SWFUpload.prototype.initSettings);SWFUpload.prototype.startUpload=function(a){this.customSettings.queue_cancelled_flag=false;this.callFlash("StartUpload",false,[a])};SWFUpload.prototype.cancelQueue=function(){this.customSettings.queue_cancelled_flag=true;this.stopUpload();var a=this.getStats();while(a.files_queued>0){this.cancelUpload();a=this.getStats()}};SWFUpload.queue.uploadCompleteHandler=function(b){var c=this.settings.user_upload_complete_handler;var d;if(b.filestatus===SWFUpload.FILE_STATUS.COMPLETE){this.customSettings.queue_upload_count++}if(typeof(c)==="function"){d=(c.call(this,b)===false)?false:true}else{d=true}if(d){var a=this.getStats();if(a.files_queued>0&&this.customSettings.queue_cancelled_flag===false){this.startUpload()}else{if(this.customSettings.queue_cancelled_flag===false){this.queueEvent("queue_complete_handler",[this.customSettings.queue_upload_count]);this.customSettings.queue_upload_count=0}else{this.customSettings.queue_cancelled_flag=false;this.customSettings.queue_upload_count=0}}}}}function FileProgress(c,a){this.fileProgressID=c.id;this.opacity=100;this.height=0;this.fileProgressWrapper=document.getElementById(this.fileProgressID);if(!this.fileProgressWrapper){this.fileProgressWrapper=document.createElement("div");this.fileProgressWrapper.className="progressWrapper";this.fileProgressWrapper.id=this.fileProgressID;this.fileProgressElement=document.createElement("div");this.fileProgressElement.className="progressContainer";var f=document.createElement("a");f.className="progressCancel";f.href="#";f.style.visibility="hidden";f.appendChild(document.createTextNode(" "));var b=document.createElement("div");b.className="progressName";b.appendChild(document.createTextNode(c.name));var e=document.createElement("div");e.className="progressBarInProgress";var d=document.createElement("div");d.className="progressBarStatus";d.innerHTML="&nbsp;";this.fileProgressElement.appendChild(f);this.fileProgressElement.appendChild(b);this.fileProgressElement.appendChild(d);this.fileProgressElement.appendChild(e);this.fileProgressWrapper.appendChild(this.fileProgressElement);document.getElementById(a).appendChild(this.fileProgressWrapper)}else{this.fileProgressElement=this.fileProgressWrapper.firstChild}this.height=this.fileProgressWrapper.offsetHeight}FileProgress.prototype.setProgress=function(a){this.fileProgressElement.className="progressContainer green";this.fileProgressElement.childNodes[3].className="progressBarInProgress";this.fileProgressElement.childNodes[3].style.width=a+"%"};FileProgress.prototype.setComplete=function(){this.fileProgressElement.className="progressContainer blue";this.fileProgressElement.childNodes[3].className="progressBarComplete";this.fileProgressElement.childNodes[3].style.width="";var a=this;setTimeout(function(){a.disappear()},10000)};FileProgress.prototype.setError=function(){this.fileProgressElement.className="progressContainer red";this.fileProgressElement.childNodes[3].className="progressBarError";this.fileProgressElement.childNodes[3].style.width="";var a=this;setTimeout(function(){a.disappear()},5000)};FileProgress.prototype.setCancelled=function(){this.fileProgressElement.className="progressContainer";this.fileProgressElement.childNodes[3].className="progressBarError";this.fileProgressElement.childNodes[3].style.width="";var a=this;setTimeout(function(){a.disappear()},2000)};FileProgress.prototype.setStatus=function(a){this.fileProgressElement.childNodes[2].innerHTML=a};FileProgress.prototype.toggleCancel=function(b,c){this.fileProgressElement.childNodes[0].style.visibility=b?"visible":"hidden";if(c){var a=this.fileProgressID;this.fileProgressElement.childNodes[0].onclick=function(){c.cancelUpload(a);return false}}};FileProgress.prototype.disappear=function(){var f=15;var c=4;var b=30;if(this.opacity>0){this.opacity-=f;if(this.opacity<0){this.opacity=0}if(this.fileProgressWrapper.filters){try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=this.opacity}catch(d){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+this.opacity+")"}}else{this.fileProgressWrapper.style.opacity=this.opacity/100}}if(this.height>0){this.height-=c;if(this.height<0){this.height=0}this.fileProgressWrapper.style.height=this.height+"px"}if(this.height>0||this.opacity>0){var a=this;setTimeout(function(){a.disappear()},b)}else{this.fileProgressWrapper.style.display="none"}};function fileQueued(c){try{var a=new FileProgress(c,this.customSettings.progressTarget);a.setStatus("Pending...");a.toggleCancel(true,this)}catch(b){this.debug(b)}}function fileQueueError(c,e,d){try{if(e===SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED){alert("You have attempted to queue too many files.\n"+(d===0?"You have reached the upload limit.":"You may select "+(d>1?"up to "+d+" files.":"one file.")));return}var a=new FileProgress(c,this.customSettings.progressTarget);a.setError();a.toggleCancel(false);switch(e){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:a.setStatus("File is too big.");this.debug("Error Code: File too big, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:a.setStatus("Cannot upload Zero Byte files.");this.debug("Error Code: Zero byte file, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:a.setStatus("Invalid File Type.");this.debug("Error Code: Invalid File Type, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;default:if(c!==null){a.setStatus("Unhandled Error")}this.debug("Error Code: "+e+", File name: "+c.name+", File size: "+c.size+", Message: "+d);break}}catch(b){this.debug(b)}}function fileDialogComplete(a,c){try{if(a>0){document.getElementById(this.customSettings.cancelButtonId).disabled=false}}catch(b){this.debug(b)}}function uploadStart(c){try{var a=new FileProgress(c,this.customSettings.progressTarget);a.setStatus("Uploading...");a.toggleCancel(true,this)}catch(b){}return true}function uploadProgress(c,f,e){try{var d=Math.ceil((f/e)*100);var a=new FileProgress(c,this.customSettings.progressTarget);a.setProgress(d);a.setStatus("Uploading...")}catch(b){this.debug(b)}}function uploadSuccess(d,b){try{var a=new FileProgress(d,this.customSettings.progressTarget);a.setComplete();a.setStatus("Complete.");a.toggleCancel(false)}catch(c){this.debug(c)}}function uploadError(c,e,d){try{var a=new FileProgress(c,this.customSettings.progressTarget);a.setError();a.toggleCancel(false);switch(e){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:a.setStatus("Upload Error: "+d);this.debug("Error Code: HTTP Error, File name: "+c.name+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:a.setStatus("Upload Failed.");this.debug("Error Code: Upload Failed, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:a.setStatus("Server (IO) Error");this.debug("Error Code: IO Error, File name: "+c.name+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:a.setStatus("Security Error");this.debug("Error Code: Security Error, File name: "+c.name+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:a.setStatus("Upload limit exceeded.");this.debug("Error Code: Upload Limit Exceeded, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:a.setStatus("Failed Validation.  Upload skipped.");this.debug("Error Code: File Validation Failed, File name: "+c.name+", File size: "+c.size+", Message: "+d);break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:if(this.getStats().files_queued===0){document.getElementById(this.customSettings.cancelButtonId).disabled=true}a.setStatus("Cancelled");a.setCancelled();break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:a.setStatus("Stopped");break;default:a.setStatus("Unhandled Error: "+e);this.debug("Error Code: "+e+", File name: "+c.name+", File size: "+c.size+", Message: "+d);break}}catch(b){this.debug(b)}jQuery("#start_button").fadeTo("fast",1)}function uploadComplete(a){if(this.getStats().files_queued===0){document.getElementById(this.customSettings.cancelButtonId).disabled=true}jQuery("#start_button").fadeTo("fast",1);if(typeof(reload_images)!="undefined"){reload_images()}if(typeof updateAll!="undefined"){updateAll(root)}}function queueComplete(b){var a=document.getElementById("divStatus");a.innerHTML=b+" file"+(b===1?"":"s")+" uploaded."}function init_upload(){if(jQuery("#content_page_id").val()){var b={content_id:jQuery("#content_page_id").val(),model_string:jQuery("#content_page_type").val(),join_field:jQuery("#join_field").val()}}else{var b={}}var a={flash_url:"/images/swfupload.swf",upload_url:"/file_upload.php",post_params:b,file_size_limit:"100 MB",file_types:"*.*",file_types_description:"All Files",file_upload_limit:100,file_queue_limit:100,custom_settings:{progressTarget:"fsUploadProgress",cancelButtonId:"btnCancel"},debug:false,button_image_url:"/images/cms/add_files_button.png",button_width:"254",button_height:"27",button_placeholder_id:"spanButtonPlaceHolder",button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_cursor:SWFUpload.CURSOR.HAND,file_queued_handler:fileQueued,file_queue_error_handler:fileQueueError,file_dialog_complete_handler:fileDialogComplete,upload_start_handler:uploadStart,upload_progress_handler:uploadProgress,upload_error_handler:uploadError,upload_success_handler:uploadSuccess,upload_complete_handler:uploadComplete,queue_complete_handler:queueComplete};swfu=new SWFUpload(a)}var swfu;function set_post_params(){var a=jQuery("#dest").html();if(a=="select a folder"){alert("You must choose a folder first");return false}if(!a){var a=jQuery("#wildfire_file_folder").val()}if(jQuery("#upload_from").length&&jQuery("#upload_from").val().length>1){jQuery.post("/file_upload.php?",{wildfire_file_folder:a,wildfire_file_description:jQuery("#wildfire_file_description").val(),upload_from_url:jQuery("#upload_from").val(),wildfire_file_filename:jQuery("#wildfire_file_filename").val(),content_id:jQuery("#url_content_page_id").val(),model_string:jQuery("#url_content_page_type").val(),join_field:jQuery("#url_join_field").val()},function(){jQuery("#start_button").fadeTo("fast",1);alert("Image Successfully Retrieved");if(typeof(reload_images)!="undefined"){reload_images()}});return true}swfu.addPostParam("wildfire_file_folder",a);swfu.addPostParam("wildfire_file_description",jQuery("#wildfire_file_description").val());swfu.startUpload()}jQuery(document).scroll(function(){});jQuery.fn.verticalCenter=function(a){var b=this;if(!a){b.css("top",jQuery(window).height()/2-this.height()/2);jQuery(window).resize(function(){b.centerScreen(!a)})}else{b.stop();b.animate({top:jQuery(window).height()/2-this.height()/2},200,"linear")}};jQuery(window).scroll(function(a){jQuery("#fs_body #informationcart").css("position","relative").css("z-index",1000);var b=getPageScroll();b=b[1];if(b<140){b=0}else{b=b-140}jQuery("#fs_body #informationcart").css("top",b)});function getPageScroll(){var b,a;if(self.pageYOffset){a=self.pageYOffset;b=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){a=document.documentElement.scrollTop;b=document.documentElement.scrollLeft}else{if(document.body){a=document.body.scrollTop;b=document.body.scrollLeft}}}return new Array(b,a)}jQuery(document).ready(function(){jQuery("#cms_users .tabs-nav").tabs();initialise_user_draggables();jQuery("#cms_users #section_browser_filter").keyup(function(){if(typeof(t)!="undefined"){clearTimeout(t)}t=setTimeout('delayed_sect_filter(jQuery("#section_browser_filter").val())',400)})});function initialise_user_draggables(){jQuery("#cms_users .section_tag").draggable({containment:"window",ghosting:true,opacity:0.4,revert:true,scroll:false,helper:"clone"});jQuery("#cms_users #sect_dropzone").droppable({accept:".section_tag",hoverClass:"dropzone_active",tolerance:"pointer",drop:function(a,b){jQuery.post("../../add_section/"+content_page_id,{id:b.draggable.attr("id")},function(c){jQuery("#sect_dropzone").html(c);initialise_user_draggables()})}});jQuery("#cms_users .section_trash_button").click(function(){jQuery.get("../../remove_section/"+content_page_id+"?sect="+this.id.substr(21),function(a){jQuery("#sect_dropzone").html(a);initialise_user_draggables()})})}function delayed_sect_filter(a){jQuery("#cms_users #section_browser_filter").css("background","white url(/images/cms/indicator.gif) no-repeat right center");jQuery.ajax({type:"post",url:"/admin/sections/filters",data:"filter="+a,complete:function(b){jQuery("#section_list").html(b.responseText);initialise_user_draggables();if(typeof(t)!="undefined"){clearTimeout(t)}jQuery("#section_browser_filter").css("background","white")}})}wildfire_containersItems=[{name:"P",title:"Paragraph",css:"wym_containers_p"},{name:"H3",title:"Main_Heading",css:"wym_containers_h3"},{name:"H4",title:"Sub_Heading",css:"wym_containers_h4"},{name:"H5",title:"Small_Heading",css:"wym_containers_h5"},{name:"PRE",title:"Preformatted",css:"wym_containers_pre"},{name:"BLOCKQUOTE",title:"Blockquote",css:"wym_containers_blockquote"}];WYMeditor.MAIN_CONTAINERS=new Array("p","h3","h4","h5","h6","pre","blockquote","address");WYMeditor.editor.prototype.wildfire=function(){var c=this;WYMeditor.STRINGS.en.Source_Code="Source code";WYMeditor.STRINGS.en.Main_Heading="Main Heading";WYMeditor.STRINGS.en.Sub_Heading="Sub Heading";WYMeditor.STRINGS.en.Small_Heading="Small Heading";WYMeditor.BLOCKS=new Array("address","blockquote","div","dl","fieldset","form","h3","h4","h5","h6","hr","noscript","ol","p","pre","table","ul","dd","dt","li","tbody","td","tfoot","th","thead","tr");c.parser._Listener.validator._tags.a.attributes[7]="target";c.parser._Listener.validator._tags.embed={attributes:["allowscriptaccess","allowfullscreen","height","src","type","width","flashvars","scale"]};c.parser._Listener.validator._tags.param={attributes:{"0":"name","1":"type",valuetype:/^(data|ref|object)$/,"2":"valuetype","3":"value"},required:["name"]};c.parser._Listener.block_tags=["a","abbr","acronym","address","area","b","base","bdo","big","blockquote","body","button","caption","cite","code","col","colgroup","dd","del","div","dfn","dl","dt","em","fieldset","form","head","h1","h2","h3","h4","h5","h6","html","i","ins","kbd","label","legend","li","map","noscript","object","ol","optgroup","option","p","pre","q","samp","script","select","small","span","strong","style","sub","sup","table","tbody","td","textarea","tfoot","th","thead","title","tr","tt","ul","var","extends"];c.parser._Listener.inline_tags=["br","hr","img","input","embed","param"];jQuery(c._box).find(".wym_tools_superscript").remove();jQuery(c._box).find(".wym_tools_subscript").remove();jQuery(c._box).find(".wym_tools_preview").remove();jQuery(c._box).find(".wym_classes").removeClass("wym_panel").addClass("wym_dropdown");jQuery(c._box).find(".wym_tools_link a").unbind("click").click(function(){jQuery.get(file_options_location,function(e){jQuery("#link_file").replaceWith(e);jQuery("#link_dialog #link_file").change(link_dialog_file_choose);var f=jQuery("#link_dialog");f.dialog("option","title","Insert Link");f.data("execute_on_insert",function(){var h=f.find("#link_url").val();var g=f.find("#link_target").val();if(h.length){c.wrap("<a href = '"+h+"' "+(g?("target='"+g+"'"):"")+">","</a>")}});f.dialog("open")});return false});jQuery("#link_dialog").dialog({width:400});var d=wym_button("video","Insert a Video");jQuery(c._box).find(".wym_tools_image").after(d);jQuery(c._box).find(".wym_tools_video a").click(function(){jQuery.get(file_options_location+"/?mime_type=video",function(e){jQuery("#link_file").replaceWith(e);jQuery("#link_dialog #link_file").change(link_dialog_file_choose);var f=jQuery("#link_dialog");f.dialog("option","title","Insert a Video");f.data("execute_on_insert",function(){var h=f.find("#link_url").val();var g=f.find("#link_target").val();if(h.length){c.insert("<a class='wildfire_video' href='"+h+"' "+(g?("target='"+g+"' "):"")+"><img class='fallback' src='/images/cms/wildfirevideo.gif' alt='Download video file: "+h+"' /></a>")}});f.dialog("open")});return false});var b=wym_button("flash","Insert a Flash Movie");jQuery(c._box).find(".wym_tools_image").after(b);jQuery(c._box).find(".wym_tools_flash a").click(function(){jQuery.get(file_options_location+"/?mime_type=shockwave",function(e){jQuery("#link_file").replaceWith(e);jQuery("#link_dialog #link_file").change(link_dialog_file_choose);var f=jQuery("#link_dialog");f.dialog("option","title","Insert a Flash File");f.data("execute_on_insert",function(){var h=f.find("#link_url").val();var g=f.find("#link_target").val();if(h.length){c.insert("<a class='wildfire_flash' href='"+h+"' "+(g?("target='"+g+"' "):"")+"><img src='/images/cms/flash_placeholder.png' alt='Flash file: "+h+"' /></a>")}});f.dialog("open")});return false});var a=wym_button("audio","Insert Audio");jQuery(c._box).find(".wym_tools_video").after(a);jQuery(c._box).find(".wym_tools_audio a").click(function(){jQuery.get(file_options_location+"/?mime_type=audio",function(e){jQuery("#link_file").replaceWith(e);jQuery("#link_dialog #link_file").change(link_dialog_file_choose);var f=jQuery("#link_dialog");f.dialog("option","title","Insert Audio");f.data("execute_on_insert",function(){var h=f.find("#link_url").val();var g=f.find("#link_target").val();if(h.length){c.insert("<a class='wildfire_audio' href='"+h+"' "+(g?("target='"+g+"' "):"")+"><img src='/images/cms/googleaudioplayer.gif' alt='Download audio file: "+h+"' /></a>")}});f.dialog("open")});return false});var a=wym_button("csv_table","Insert CSV Data Table");jQuery(c._box).find(".wym_tools_audio").after(a);jQuery(c._box).find(".wym_tools_csv_table a").click(function(){jQuery.get(file_options_location+"/?mime_type=text",function(e){jQuery("#link_file").replaceWith(e);jQuery("#link_dialog #link_file").change(link_dialog_file_choose);var f=jQuery("#link_dialog");f.dialog("option","title","Insert CSV Data Table");f.data("execute_on_insert",function(){var h=f.find("#link_url").val();var g=f.find("#link_target").val();if(h.length){c.insert("<a class='wildfire_csv_table' href='"+h+"' "+(g?("target='"+g+"' "):"")+"><img src='/images/cms/table_placeholder.jpg' alt='Download csv file: "+h+"' /></a>")}});f.dialog("open")});return false});jQuery(c._box).find(".wym_tools_image a").unbind("click").click(function(){popup_file_browse_dialog(c);return false});initialise_inline_image_edit(c);jQuery(c._box).find(".wym_tools_paste a").unbind("click").click(function(){var e=jQuery("#paste_word");e.data("wym",c);e.dialog({width:540});e.dialog("open");return false});jQuery(c._box).find(".wym_tools_table a").unbind("click").click(function(){var e=jQuery("#table_dialog");e.data("wym",c);e.dialog({width:340});e.dialog("open")});jQuery(".subnav a.dd, .subnav .issub").unbind("hover").hover(function(){jQuery(this).parents(".subnav").children(".wym_classes").removeClass("wym_classes_hidden").show()},function(){jQuery(this).parents(".subnav").children(".wym_classes").addClass("wym_classes_hidden").hide()})};function wym_button(a,c){var b="<li class='wym_tools_"+a+"'><a name='"+a+"' href='#' title='"+c+"'>"+c+"</a></li>";return b}function popup_file_browse_dialog(b,a){jQuery.get(file_browser_location,{mime_type:file_mime_type},function(c){jQuery(".image_display").html(c);init_inline_image_select(b);var e=jQuery(".inline_image_dialog");e.data("wym",b);if(a&&a.length){a.attr("width",a.attr("width"));e.find(".selected_image img").attr("src",a.attr("src")).css("width","90px");e.find(".meta_description").val(a.attr("alt"));var d="flow_left";if(a.hasClass("flow_right")){d="flow_right"}else{if(a.hasClass("flow_normal")){d="flow_normal"}}jQuery("input:radio[name=flow]").val([d]);e.data("existing_image",a)}e.dialog("option","title","Insert an Image");e.dialog("open")})}function initialise_inline_image_edit(a){jQuery(a._doc).find("img.inline_image").unbind("dblclick").dblclick(function(){popup_file_browse_dialog(a,jQuery(this))})}function init_inline_image_select(a){jQuery(".image_display .add_image a").click(function(){jQuery(".inline_image_dialog .selected_image img").attr("src","/show_image/"+jQuery(this).parent().parent().attr("id")+"/90.jpg")})}WYMeditor.editor.prototype.computeBasePath=function(){return"/javascripts/wymeditor/"};